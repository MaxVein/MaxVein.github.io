(this["webpackJsonpdigichlist-if-117-ui"]=this["webpackJsonpdigichlist-if-117-ui"]||[]).push([[0],{103:function(e,t,a){e.exports={groups:"Orders_groups__2V0AL",entityHeader:"Orders_entityHeader__3Ql2D","MuiSelect-root":"Orders_MuiSelect-root__30had",entityHeaderTitle:"Orders_entityHeaderTitle__1klSm",entityHeaderButton:"Orders_entityHeaderButton__2LeRP",loader:"Orders_loader__1Do-P","MuiInput-formControl":"Orders_MuiInput-formControl__3rfCd",button:"Orders_button__2gZh6"}},152:function(e,t,a){e.exports={filterButton:"Dashboard_filterButton__3dOFh","MuiCardHeader-root":"Dashboard_MuiCardHeader-root__3tcNq","MuiCardHeader-action":"Dashboard_MuiCardHeader-action__2x6-6"}},197:function(e,t,a){e.exports={deleteModal:"DeleteDialog_deleteModal__hTI4t"}},198:function(e,t,a){},199:function(e,t,a){},312:function(e,t,a){e.exports={Loader:"Loader_Loader__2sOU-"}},334:function(e,t,a){},41:function(e,t,a){e.exports={entityHeader:"DefectsTable_entityHeader__2FaGo",entityTableContainer:"DefectsTable_entityTableContainer__MohTn",button:"DefectsTable_button__3r9R6",entityHeaderTitle:"DefectsTable_entityHeaderTitle__jBl58",entityHeaderButton:"DefectsTable_entityHeaderButton__1Ppsf",form:"DefectsTable_form__38OnG",deleteModal:"DefectsTable_deleteModal__381Ui","MuiDialogTitle-root":"DefectsTable_MuiDialogTitle-root__2DV_I",formControl:"DefectsTable_formControl__1J3Qf",formGroup:"DefectsTable_formGroup__3XVN7"}},44:function(e,t,a){e.exports={entityHeader:"UsersTable_entityHeader__fV_mJ",entityTableContainer:"UsersTable_entityTableContainer__mcTRH",button:"UsersTable_button__Ib56z",entityHeaderTitle:"UsersTable_entityHeaderTitle__2N5Ei",entityHeaderButton:"UsersTable_entityHeaderButton__2BJKn",form:"UsersTable_form__31J4X",deleteModal:"UsersTable_deleteModal__1C_5p","MuiDialogTitle-root":"UsersTable_MuiDialogTitle-root__2Id-g",formControl:"UsersTable_formControl__Ed66Z",formGroup:"UsersTable_formGroup__1iG0T"}},468:function(e,t,a){},469:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a(0),c=a.n(r),s=a(16),i=a.n(s),o=(a(334),a(9)),l=a.n(o),d=a(14),u=a(7),j=a(506),b=a(503),p=a(504),f=a(139),h=a.n(f),m="https://digichlist-api.herokuapp.com/api/",O=function(){var e=Object(d.a)(l.a.mark((function _callee(e){var t;return l.a.wrap((function _callee$(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,h.a.post("".concat(m,"authorization/login"),e);case 3:return t=a.sent,sessionStorage.setItem("secret-auth-token",t.data.token),a.abrupt("return",t.data);case 8:return a.prev=8,a.t0=a.catch(0),a.abrupt("return",{err:a.t0});case 11:case"end":return a.stop()}}),_callee,null,[[0,8]])})));return function login(t){return e.apply(this,arguments)}}(),x=function logOut(){sessionStorage.removeItem("secret-auth-token")},g=function isLogged(){return!!sessionStorage.getItem("secret-auth-token")},v=a(498),_=a(560);function SnackbarHandler(e){var t=e.snack,a=e.setSnack,r=function closeSnack(e,t){"clickaway"!==t&&a({open:!1})};return Object(n.jsx)(v.a,{open:t.open,autoHideDuration:3e3,onClose:r,children:Object(n.jsx)(_.a,{elevation:4,variant:"filled",onClose:function onClose(e){return r()},severity:t.type,children:t.message})})}var y=a(50),C=a(501),w=a(502),D=a(73),k=a(18),S=Object(C.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)},logo:{backgroundColor:"#fafafa"}}})),N=function Login(e){var t=e.setAuthInfo,a=Object(r.useState)({open:!1,message:"",type:"success"}),c=Object(u.a)(a,2),s=c[0],i=c[1],o=S(),f=k.c({name:k.e().required("\u041e\u0431\u043e\u0432'\u044f\u0437\u043a\u043e\u0432\u0435 \u043f\u043e\u043b\u0435"),password:k.e().required("\u041e\u0431\u043e\u0432'\u044f\u0437\u043a\u043e\u0432\u0435 \u043f\u043e\u043b\u0435")}),h=function(){var e=Object(d.a)(l.a.mark((function _callee(e){var a,n,r;return l.a.wrap((function _callee$(c){for(;;)switch(c.prev=c.next){case 0:return a={email:e.name,password:e.password},c.next=3,O(a);case 3:return(n=c.sent).err&&i({open:!0,message:"\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u0438\u0439 \u043b\u043e\u0433\u0456\u043d \u0430\u0431\u043e \u043f\u0430\u0440\u043e\u043b\u044c",type:"error"}),localStorage.setItem("admin_username",n.admin),c.next=8,g();case 8:r=c.sent,t(r);case 10:case"end":return c.stop()}}),_callee)})));return function submitHandler(t){return e.apply(this,arguments)}}();return Object(n.jsxs)(w.a,{component:"main",maxWidth:"xs",children:[Object(n.jsx)(b.a,{}),Object(n.jsxs)("div",{className:o.paper,children:[Object(n.jsx)(y.a,{component:"h1",variant:"h5",children:"\u0412\u0432\u0456\u0439\u0434\u0456\u0442\u044c"}),Object(n.jsx)(D.a,{initialValues:{name:"",password:""},validationSchema:f,onSubmit:h,validateOnMount:!0,children:function children(e){return Object(n.jsxs)("form",{className:o.form,noValidate:!0,onSubmit:e.handleSubmit,children:[Object(n.jsx)(p.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"name",label:"\u0415\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u0430 \u0430\u0434\u0440\u0435\u0441\u0430",name:"name",value:e.values.name,onBlur:e.handleBlur,onChange:e.handleChange,helperText:e.touched.name?e.errors.name:"",error:e.touched.name&&Boolean(e.errors.name)}),Object(n.jsx)(p.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"\u041f\u0430\u0440\u043e\u043b\u044c",type:"password",id:"password",onBlur:e.handleBlur,value:e.values.password,onChange:e.handleChange,helperText:e.touched.password?e.errors.password:"",error:e.touched.password&&Boolean(e.errors.password)}),Object(n.jsx)(j.a,{disabled:!e.isValid,type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:o.submit,children:"\u0412\u0445\u0456\u0434"})]})}})]}),Object(n.jsx)(SnackbarHandler,{snack:s,setSnack:i})]})},A=a(119),P=a(42),B=a(22),T=a(552),I=a(480),H=a(553),F=a(522),M=a(500),E=a(563),U=a(556),W=a(559),$=a(566),z=a(529),R=a(554),V=a(557),L=a(6),G=a(564),q=a(19),Z=a(482),J=a(507),Q=a(508),K=Object(C.a)((function(e){return{a:{color:"black"},itemText:{fontSize:"1rem"},active:{color:"white",fontWeight:500,backgroundColor:e.palette.primary.main,"& svg":{color:"white"}}}})),X=function MainListItems(e){var t=e.path,a=e.icon,r=e.title,c=K();return Object(n.jsxs)(Z.a,{className:c.a,component:P.c,to:t,exact:!0,activeClassName:c.active,children:[Object(n.jsx)(J.a,{children:a}),Object(n.jsx)(Q.a,{disableTypography:!0,className:c.itemText,color:"primary",primary:r})]})},Y=a(39),ee=a(561),te=a(518),ae=a(520),ne=a(515),re=a(514),ce=a(519),se=a(562),ie=a(516),oe=a(310),le=a.n(oe),de=a(75),ue=a.n(de),je=h.a.create({});je.interceptors.request.use((function(e){var t=sessionStorage.getItem("secret-auth-token");return t&&(e.headers.Authorization=t),e})),je.interceptors.response.use((function(e){return e}),(function(e){return 401===e.response.status&&(x(),window.location.reload()),e}));var be=function(){var e=Object(d.a)(l.a.mark((function _callee(){return l.a.wrap((function _callee$(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,je.get("".concat(m,"admin/all"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),_callee)})));return function getAdmins(){return e.apply(this,arguments)}}(),pe=function(){var e=Object(d.a)(l.a.mark((function _callee2(e){var t;return l.a.wrap((function _callee2$(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,je.post("".concat(m,"admin/registration"),e);case 3:return t=a.sent,a.abrupt("return",t.data.admin);case 7:return a.prev=7,a.t0=a.catch(0),a.abrupt("return",{err:a.t0});case 10:case"end":return a.stop()}}),_callee2,null,[[0,7]])})));return function addAdminData(t){return e.apply(this,arguments)}}(),fe=function(){var e=Object(d.a)(l.a.mark((function _callee3(e,t){var a;return l.a.wrap((function _callee3$(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,je.delete("".concat(m,"admin/delete/").concat(e));case 3:return n.sent,a=t.filter((function(t){return e!==t._id})),n.abrupt("return",a);case 8:return n.prev=8,n.t0=n.catch(0),n.abrupt("return",{err:n.t0});case 11:case"end":return n.stop()}}),_callee3,null,[[0,8]])})));return function deleteAdminData(t,a){return e.apply(this,arguments)}}(),he=function(){var e=Object(d.a)(l.a.mark((function _callee4(e,t){var a,n,r;return l.a.wrap((function _callee4$(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,a={email:t.data.email,username:t.data.username,password:t.data.password},c.next=4,je.patch("".concat(m,"admin/update/").concat(t.editId),a);case 4:return n=c.sent,r=e.map((function(e){return n.data.admin._id===e._id?n.data.admin:e})),c.abrupt("return",r);case 9:return c.prev=9,c.t0=c.catch(0),c.abrupt("return",{err:c.t0});case 12:case"end":return c.stop()}}),_callee4,null,[[0,9]])})));return function updateAdminData(t,a){return e.apply(this,arguments)}}(),me=a(309),Oe=a.n(me),xe=a(150),ge=a.n(xe),ve=a(509),_e=a(513),ye=a(511),Ce=a(512),we=a(510),De=function ConfirmDelete(e){var t=e.open,a=e.setShowDelDialog,r=e.id,c=e.setDeleteAdmin,s=function handleClose(){a(!1)};return Object(n.jsxs)(ve.a,{open:t,onClose:s,"aria-labelledby":"responsive-dialog-title",children:[Object(n.jsx)(we.a,{id:"responsive-dialog-title",children:"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438 \u0430\u0434\u043c\u0456\u043d\u0430"}),Object(n.jsx)(ye.a,{children:Object(n.jsx)(Ce.a,{children:"\u0412\u0438 \u0432\u043f\u0435\u0432\u043d\u0435\u043d\u0456 \u0449\u043e \u0445\u043e\u0447\u0435\u0442\u0435 \u0432\u0438\u0434\u0430\u043b\u0438\u0442\u0438 \u0430\u0434\u043c\u0456\u043d\u0430?"})}),Object(n.jsxs)(_e.a,{children:[Object(n.jsx)(j.a,{autoFocus:!0,onClick:s,color:"primary",children:"\u0412\u0456\u0434\u043c\u0456\u043d\u0438\u0442\u0438"}),Object(n.jsx)(j.a,{onClick:function onClick(){a(!1),c({id:r,delete:!0})},color:"primary",autoFocus:!0,children:"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438"})]})]})},ke=a(15),Se=function AdminAddDialog(e){var t=e.open,a=e.setOpen,r=e.admin,c=e.setEdit,s=e.setAddAdmin,i=e.setEditAdmin,o={username:r?r.username:"",email:r?r.email:"",password:"",confirmPassword:""},l=r?k.c({username:k.e().matches(/^(?=[a-zA-Z0-9._]{6,20}$)(?!.*[_.]{2})[^_.].*[^_.]$/,"\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u0456\u043d\u0448\u0435 \u0456\u043c'\u044f").required("\u0417\u0430\u043f\u043e\u0432\u043d\u0438 \u043f\u043e\u043b\u0435").min(5,"\u041a\u043e\u0440\u043e\u0442\u043a\u0435 \u0456\u043c'\u044f").max(20,"\u0417\u0430\u0434\u043e\u0432\u0433\u0435 \u0456\u043c'\u044f"),email:k.e().email("\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u043a\u043e\u0440\u0435\u043a\u0442\u043d\u0443 \u043f\u043e\u0448\u0442\u0443").required("\u0417\u0430\u043f\u043e\u0432\u043d\u0438 \u043f\u043e\u043b\u0435"),password:k.e().min(8,"\u041c\u0456\u043d\u0456\u043c\u0443\u043c 8 \u0441\u0438\u043c\u0432\u043e\u043b\u0456\u0432").matches(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[a-zA-Z\d]{8,}$/,"\u041d\u0435\u0432\u0456\u0434\u043f\u043e\u0432\u0456\u0434\u043d\u0438\u0439 \u043f\u0430\u0440\u043e\u043b\u044c"),confirmPassword:k.e().oneOf([k.d("password"),null],"\u041f\u0430\u0440\u043e\u043b\u0456 \u043d\u0435 \u0441\u043f\u0456\u0432\u043f\u0430\u0434\u0430\u044e\u0442\u044c")}):k.c({username:k.e().matches(/^(?=[a-zA-Z0-9._]{6,20}$)(?!.*[_.]{2})[^_.].*[^_.]$/,"\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u0456\u043d\u0448\u0435 \u0456\u043c'\u044f").required("\u0417\u0430\u043f\u043e\u0432\u043d\u0438 \u043f\u043e\u043b\u0435").min(5,"\u041a\u043e\u0440\u043e\u0442\u043a\u0435 \u0456\u043c'\u044f").max(20,"\u0417\u0430\u0434\u043e\u0432\u0433\u0435 \u0456\u043c'\u044f"),email:k.e().email("\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u043a\u043e\u0440\u0435\u043a\u0442\u043d\u0443 \u043f\u043e\u0448\u0442\u0443").required("\u0417\u0430\u043f\u043e\u0432\u043d\u0438 \u043f\u043e\u043b\u0435"),password:k.e().required("\u0417\u0430\u043f\u043e\u0432\u043d\u0438 \u043f\u043e\u043b\u0435").min(8,"\u041c\u0456\u043d\u0456\u043c\u0443\u043c 8 \u0441\u0438\u043c\u0432\u043e\u043b\u0456\u0432").matches(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[a-zA-Z\d]{8,}$/,"\u041d\u0435\u0432\u0456\u0434\u043f\u043e\u0432\u0456\u0434\u043d\u0438\u0439 \u043f\u0430\u0440\u043e\u043b\u044c"),confirmPassword:k.e().oneOf([k.d("password"),null],"\u041f\u0430\u0440\u043e\u043b\u0456 \u043d\u0435 \u0441\u043f\u0456\u0432\u043f\u0430\u0434\u0430\u044e\u0442\u044c")}),d=function handleClose(){r?c(!1):a(!1)};return Object(n.jsx)("div",{children:Object(n.jsxs)(ve.a,{open:t,onClose:d,id:"form-dialog","aria-labelledby":"form-dialog-title",children:[Object(n.jsx)(we.a,{id:"form-dialog-title",children:r?"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u0438"}),Object(n.jsx)(ye.a,{children:Object(n.jsx)(D.a,{initialValues:o,validationSchema:l,validateOnMount:!0,onSubmit:function onSubmit(e){r?!function compareObj(e,t){var a=!0;for(var n in e)if(e[n]!==t[n]){a=!1;break}return a}({username:r.username,email:r.email,password:r.password},e=""===e.password?Object(ke.a)(Object(ke.a)({},e),{},{password:r.password}):e)?i({edit:!0,data:e,isChanged:!0,editId:r._id}):i({edit:!0,data:e,isChanged:!1,editId:r._id}):s({add:!0,data:e})},children:function children(e){var t=e.isValid,a=e.errors,c=e.touched,s=e.values,i=e.handleChange,o=e.handleBlur,l=e.handleSubmit;return Object(n.jsxs)("form",{onSubmit:l,children:[Object(n.jsx)(p.a,{name:"username",value:s.username,onChange:i,onBlur:o,autoFocus:!0,margin:"dense",id:"username",label:"\u0406\u043c\u044f \u043a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0430",type:"text",fullWidth:!0,error:c.username&&Boolean(a.username)}),Object(n.jsx)(p.a,{name:"email",value:s.email,onChange:i,onBlur:o,autoFocus:!0,margin:"dense",id:"email",label:"\u041f\u043e\u0448\u0442\u0430",type:"text",fullWidth:!0,error:c.email&&Boolean(a.email)}),Object(n.jsx)(p.a,{fullWidth:!0,margin:"dense",type:"password",label:"\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c",name:"password",onChange:i,onBlur:o,value:s.password,helperText:c.password?a.password:"",error:c.password&&Boolean(a.password)}),Object(n.jsx)(p.a,{fullWidth:!0,margin:"dense",type:"password",label:"\u041f\u0456\u0434\u0442\u0432\u0435\u0440\u0434\u0456\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c",name:"confirmPassword",onChange:i,onBlur:o,value:s.confirmPassword,helperText:c.confirmPassword?a.confirmPassword:"",error:c.confirmPassword&&Boolean(a.confirmPassword)}),Object(n.jsxs)("div",{style:{margin:"1rem",textAlign:"center"},children:[Object(n.jsx)(j.a,{onClick:d,color:"primary",children:"\u0412\u0456\u0434\u043c\u0456\u043d\u0438\u0442\u0438"}),Object(n.jsx)(j.a,{disabled:!t,type:"submit",color:"primary",children:r?"\u041e\u043d\u043e\u0432\u0438\u0442\u0438":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u0438"})]})]})}})})]})})},Ne=function AdminRow(e){var t=e.adminData,a=e.id,c=e.setDeleteAdmin,s=e.setEditAdmin,i=t.username,o=t.email,l=t._id,d=Object(r.useState)(!1),b=Object(u.a)(d,2),p=b[0],f=b[1],h=Object(r.useState)(!1),m=Object(u.a)(h,2),O=m[0],x=m[1];return Object(n.jsxs)(re.a,{children:[Object(n.jsx)(ne.a,{children:a+1}),Object(n.jsx)(ne.a,{children:i}),Object(n.jsx)(ne.a,{children:o}),Object(n.jsx)(ne.a,{children:Object(n.jsxs)("div",{children:[Object(n.jsx)(j.a,{color:"primary",variant:"contained",className:ue.a.button,onClick:function dialogOpenHandler(){f(!0)},children:Object(n.jsx)(Oe.a,{})}),Object(n.jsx)(j.a,{color:"primary",variant:"contained",className:ue.a.button,onClick:function dialogOpenDelHandler(){x(!0)},children:Object(n.jsx)(ge.a,{})})]})}),O?Object(n.jsx)(De,{open:O,setShowDelDialog:x,id:l,setDeleteAdmin:c}):null,p?Object(n.jsx)(Se,{open:p,setOpen:f,setAddAdmin:null,admin:t,setEdit:f,setEditAdmin:s}):null]})},Ae=a(517),Pe=a(105),Be=function Admins(){var e=Object(r.useState)(!0),t=Object(u.a)(e,2),a=t[0],c=t[1],s=Object(r.useState)(0),i=Object(u.a)(s,2),o=i[0],b=i[1],p=Object(r.useState)(5),f=Object(u.a)(p,2),h=f[0],m=f[1],O=Object(r.useState)([]),x=Object(u.a)(O,2),g=x[0],v=x[1],_=Object(r.useState)(!1),C=Object(u.a)(_,2),w=C[0],D=C[1],k=Object(r.useState)({add:!1,data:{}}),S=Object(u.a)(k,2),N=S[0],A=S[1],P=Object(r.useState)({edit:!1,data:{},editId:0,isChanged:!1}),B=Object(u.a)(P,2),T=B[0],I=B[1],H=Object(r.useState)({delete:!1,id:0}),F=Object(u.a)(H,2),M=F[0],E=F[1],U=Object(r.useState)({open:!1,message:"",type:""}),W=Object(u.a)(U,2),$=W[0],z=W[1];Object(r.useEffect)((function(){Object(d.a)(l.a.mark((function _callee(){var e;return l.a.wrap((function _callee$(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,be();case 2:"object"===typeof(e=t.sent)?(v(e.data.admins),c(!1),z({open:!0,message:"\u0410\u0434\u043c\u0456\u043d\u0438 \u0443\u0441\u043f\u0456\u0448\u043d\u043e \u0437\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u0456",type:"success"})):z({open:!0,message:"\u0421\u0442\u0430\u043b\u0430\u0441\u044f \u043f\u043e\u043c\u0438\u043b\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u0456",type:"error"});case 4:case"end":return t.stop()}}),_callee)})))()}),[]),Object(r.useEffect)((function(){Object(d.a)(l.a.mark((function _callee2(){var e;return l.a.wrap((function _callee2$(t){for(;;)switch(t.prev=t.next){case 0:if(!N.add){t.next=5;break}return t.next=3,pe(N.data);case 3:(e=t.sent).err?(D(!1),z({open:!0,message:e.err,type:"error"})):(v([].concat(Object(Y.a)(g),[e])),D(!1),b(Math.floor((g.length-1)/h)),z({open:!0,message:"\u0410\u0434\u043c\u0456\u043d\u0456\u0441\u0442\u0440\u0430\u0442\u043e\u0440\u0430 \u0434\u043e\u0434\u0430\u043d\u043e",type:"success"}));case 5:case"end":return t.stop()}}),_callee2)})))()}),[N]),Object(r.useEffect)((function(){Object(d.a)(l.a.mark((function _callee3(){var e;return l.a.wrap((function _callee3$(t){for(;;)switch(t.prev=t.next){case 0:if(!M.delete){t.next=5;break}return t.next=3,fe(M.id,g);case 3:e=t.sent,Array.isArray(e)?(v(e),b(Math.ceil((g.length-1)/h)-1),z({open:!0,message:"\u0410\u0434\u043c\u0456\u043d\u0456\u0441\u0442\u0440\u0430\u0442\u043e\u0440\u0430 \u0432\u0438\u0434\u0430\u043b\u0435\u043d\u043e",type:"success"})):(D(!1),z({open:!0,message:e.err,type:"error"}));case 5:case"end":return t.stop()}}),_callee3)})))()}),[M]),Object(r.useEffect)((function(){Object(d.a)(l.a.mark((function _callee4(){var e;return l.a.wrap((function _callee4$(t){for(;;)switch(t.prev=t.next){case 0:if(T.isChanged||!T.edit){t.next=4;break}z({open:!0,message:"\u041d\u0456\u0447\u043e\u0433\u043e \u043d\u0435 \u0437\u043c\u0456\u043d\u0435\u043d\u043e",type:"info"}),t.next=9;break;case 4:if(!T.edit){t.next=9;break}return t.next=7,he(g,T);case 7:e=t.sent,Array.isArray(e)?(v(e),D(!1),z({open:!0,message:"\u0413\u0440\u0443\u043f\u0443 \u0440\u0435\u0434\u0430\u0433\u043e\u0432\u0430\u043d\u043e",type:"success"})):(z({open:!0,message:e.err,type:"error"}),D(!1));case 9:case"end":return t.stop()}}),_callee4)})))()}),[T]);return a?Object(n.jsx)("div",{className:ue.a.loader,children:Object(n.jsx)(ie.a,{size:70})}):Object(n.jsxs)("div",{children:[Object(n.jsxs)("div",{className:ue.a.entityHeader,children:[Object(n.jsxs)(y.a,{component:"h2",variant:"h4",color:"textPrimary",className:ue.a.entityHeaderTitle,children:[Object(n.jsx)(Ae.a,{fontSize:"large"}),"\u0410\u0434\u043c\u0456\u043d\u0456\u0441\u0442\u0440\u0430\u0442\u043e\u0440\u0438"]}),Object(n.jsxs)(j.a,{onClick:function dialogOpenHandler(){D(!0)},disableElevation:!0,variant:"contained",color:"primary",className:ue.a.entityHeaderButton,children:[Object(n.jsx)(le.a,{}),"\u0414\u043e\u0434\u0430\u0442\u0438 \u0430\u0434\u043c\u0456\u043d\u0430"]})]}),Object(n.jsxs)(Pe.a,{elevation:6,children:[Object(n.jsxs)(te.a,{stickyHeader:!0,"aria-label":"sticky table",children:[Object(n.jsx)(ce.a,{children:Object(n.jsx)(re.a,{children:["\u2116","\u0406\u043c'\u044f","\u041f\u043e\u0448\u0442\u0430","\u0414\u0456\u0457"].map((function(e){return Object(n.jsx)(ne.a,{children:e},Object(ee.a)())}))})}),Object(n.jsx)(ae.a,{children:g.slice(o*h,o*h+h).map((function(e,t){return Object(n.jsx)(Ne,{adminData:e,id:t,setEditAdmin:I,setDeleteAdmin:E},Object(ee.a)())}))})]}),Object(n.jsx)(se.a,{rowsPerPageOptions:[5,10,25,50],component:"div",count:g.length,rowsPerPage:h,page:o,onChangePage:function handleChangePage(e,t){b(t)},onChangeRowsPerPage:function handleChangeRowsPerPage(e){m(+e.target.value),b(0)}})]}),Object(n.jsx)(SnackbarHandler,{snack:$,setSnack:z}),Object(n.jsx)(Se,{open:w,setOpen:D,setAddAdmin:A,admin:null,setEdit:null,setEditAdmin:null})]})},Te=a(524),Ie=a(474),He=a(475),Fe=a(488),Me=a(521),Ee=a(523),Ue=a(103),We=a.n(Ue),$e=a(48),ze=function(){var e=Object(d.a)(l.a.mark((function _callee(){var e,t,a,n,r;return l.a.wrap((function _callee$(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,c.next=3,je.get("".concat(m,"order/all"));case 3:e=c.sent,t=Object($e.a)(e.data.orders),c.prev=5,t.s();case 7:if((a=t.n()).done){c.next=15;break}return n=a.value,c.next=11,je.get("".concat(m,"user/getById/").concat(n.user));case 11:(r=c.sent).data.user?n.username="".concat(r.data.user.first_name," ").concat(r.data.user.last_name):n.username="\u0406\u043c'\u044f \u043d\u0435 \u0437\u043d\u0430\u0439\u0434\u0435\u043d\u043e";case 13:c.next=7;break;case 15:c.next=20;break;case 17:c.prev=17,c.t0=c.catch(5),t.e(c.t0);case 20:return c.prev=20,t.f(),c.finish(20);case 23:return c.abrupt("return",e.data.orders);case 26:return c.prev=26,c.t1=c.catch(0),c.abrupt("return",{err:c.t1});case 29:case"end":return c.stop()}}),_callee,null,[[0,26],[5,17,20,23]])})));return function getOrders(){return e.apply(this,arguments)}}(),Re=function(){var e=Object(d.a)(l.a.mark((function _callee2(e,t){var a,n,r,c;return l.a.wrap((function _callee2$(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,a=Object(ke.a)(Object(ke.a)({},t.data),{},{done:!t.data.done,admin_username:localStorage.getItem("admin_username")}),s.next=4,je.patch("".concat(m,"order/update/").concat(t.data._id),a);case 4:return n=s.sent,s.next=7,je.get("".concat(m,"user/getById/").concat(n.data.order.user));case 7:return r=s.sent,n.data.order.username="".concat(r.data.user.first_name," ").concat(r.data.user.last_name),c=e.map((function(e){return n.data.order._id===e._id?n.data.order:e})),s.abrupt("return",c);case 13:return s.prev=13,s.t0=s.catch(0),s.abrupt("return",{err:s.t0});case 16:case"end":return s.stop()}}),_callee2,null,[[0,13]])})));return function updateOrderData(t,a){return e.apply(this,arguments)}}(),Ve=function(){var e=Object(d.a)(l.a.mark((function _callee3(e,t){var a;return l.a.wrap((function _callee3$(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,je.delete("".concat(m,"order/delete/").concat(e));case 3:return a=t.filter((function(t){return e!==t._id})),n.abrupt("return",a);case 7:return n.prev=7,n.t0=n.catch(0),n.abrupt("return",{err:"\u0412\u0438\u043d\u0438\u043a\u043b\u0430 \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0430 \u043f\u0456\u0434 \u0447\u0430\u0441 \u0432\u0438\u0434\u0430\u043b\u0435\u043d\u043d\u044f"});case 10:case"end":return n.stop()}}),_callee3,null,[[0,7]])})));return function delOrdersData(t,a){return e.apply(this,arguments)}}(),Le=function ConfirmDelete(e){var t=e.open,a=e.setShowDelDialog,r=e.id,c=e.setDeleteOrder,s=function handleClose(){a(!1)};return Object(n.jsxs)(ve.a,{open:t,onClose:s,"aria-labelledby":"responsive-dialog-title",children:[Object(n.jsx)(we.a,{id:"responsive-dialog-title",children:"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f"}),Object(n.jsx)(ye.a,{children:Object(n.jsx)(Ce.a,{children:"\u0412\u0438 \u0432\u043f\u0435\u0432\u043d\u0435\u043d\u0456 \u0449\u043e \u0445\u043e\u0447\u0435\u0442\u0435 \u0432\u0438\u0434\u0430\u043b\u0438\u0442\u0438 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f?"})}),Object(n.jsxs)(_e.a,{children:[Object(n.jsx)(j.a,{autoFocus:!0,onClick:s,color:"primary",children:"\u0412\u0456\u0434\u043c\u0456\u043d\u0438\u0442\u0438"}),Object(n.jsx)(j.a,{onClick:function onClick(){a(!1),c({id:r,delete:!0})},color:"primary",autoFocus:!0,children:"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438"})]})]})},Ge=function ExtraInfo(e){var t=e.open,a=e.setShowInfoDialog,r=e.info,c=function handleClose(){a(!1)};return Object(n.jsxs)(ve.a,{open:t,onClose:c,"aria-labelledby":"responsive-dialog-title",children:[Object(n.jsx)(we.a,{id:"responsive-dialog-title",children:"\u0414\u043e\u0434\u0430\u0442\u043a\u043e\u0432\u0430 \u0456\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0456\u044f"}),Object(n.jsx)(ye.a,{children:Object(n.jsx)(Ce.a,{children:r})}),Object(n.jsx)(_e.a,{children:Object(n.jsx)(j.a,{onClick:c,color:"primary",autoFocus:!0,children:"\u0417\u0430\u043a\u0440\u0438\u0442\u0438"})})]})},qe=a(311),Ze=a.n(qe),Je=Object(C.a)((function(e){return{formControl:{display:"flex",flexDirection:"row",alignItems:"center",margin:e.spacing(1),minWidth:120},del:{cursor:"pointer"},info:{display:"flex",alignItems:"center"},infoBtn:{"&:hover":{cursor:"pointer",color:"red"}}}})),Qe=function OrderRow(e){var t=e.orderData,a=e.id,c=e.setEditOrder,s=e.setDeleteOrder,i=Je(),o=t.title,l=t.done,d=t.note,j=t.date,b=t.quantity,p=t._id,f=t.username,h=Object(r.useState)(l),m=Object(u.a)(h,2),O=m[0],x=m[1],g=Object(r.useState)(!1),v=Object(u.a)(g,2),_=v[0],y=v[1],C=Object(r.useState)(!1),w=Object(u.a)(C,2),D=w[0],k=w[1];return Object(n.jsxs)(re.a,{children:[Object(n.jsx)(ne.a,{children:a}),Object(n.jsx)(ne.a,{children:Object(n.jsxs)("div",{className:i.info,children:[o,"No description provided"!==d?Object(n.jsx)(Ze.a,{className:i.infoBtn,onClick:function dialogOpenInfoHandler(){y(!0)}}):null]})}),Object(n.jsx)(ne.a,{children:b}),Object(n.jsx)(ne.a,{children:new Date(j).toISOString().substring(0,10)}),Object(n.jsx)(ne.a,{children:f}),Object(n.jsx)(ne.a,{children:Object(n.jsxs)(Ie.a,{className:i.formControl,children:[Object(n.jsxs)(Fe.a,{id:"demo-simple-select",value:O,displayEmpty:!0,onChange:function handleChange(e){x(!O),c({edit:!0,id:p,data:t})},children:[Object(n.jsx)(Me.a,{value:O,children:O?"\u0412\u0438\u043a\u043e\u043d\u0430\u043d\u043e":"\u0412 \u043e\u0431\u0440\u043e\u0431\u0446\u0456"}),Object(n.jsx)(Me.a,{children:O?"\u0412 \u043e\u0431\u0440\u043e\u0431\u0446\u0456":"\u0412\u0438\u043a\u043e\u043d\u0430\u043d\u043e"})]}),O?Object(n.jsx)(ge.a,{className:i.del,onClick:function dialogOpenDelHandler(){k(!0)}}):null]})}),_?Object(n.jsx)(Ge,{open:_,setShowInfoDialog:y,info:d}):null,D?Object(n.jsx)(Le,{open:D,setShowDelDialog:k,id:p,setDeleteOrder:s}):null]})},Ke=function Orders(){var e=["\u0410\u043a\u0442\u0438\u0432\u043d\u0456","\u0417\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u0456"],t=Object(r.useState)(!0),a=Object(u.a)(t,2),c=a[0],s=a[1],i=Object(r.useState)(0),o=Object(u.a)(i,2),j=o[0],b=o[1],p=Object(r.useState)(5),f=Object(u.a)(p,2),h=f[0],m=f[1],O=Object(r.useState)([]),x=Object(u.a)(O,2),g=x[0],v=x[1],_=Object(r.useState)([]),C=Object(u.a)(_,2),w=C[0],D=C[1],k=Object(r.useState)(!1),S=Object(u.a)(k,2),N=(S[0],S[1]),A=Object(r.useState)(e[0]),P=Object(u.a)(A,2),B=P[0],T=P[1],I=Object(r.useState)({edit:!1,id:0,data:{}}),H=Object(u.a)(I,2),F=H[0],M=H[1],E=Object(r.useState)({delete:!1,id:0}),U=Object(u.a)(E,2),W=U[0],$=U[1],z=Object(r.useState)({open:!1,message:"",type:"success"}),R=Object(u.a)(z,2),V=R[0],L=R[1];Object(r.useEffect)((function(){Object(d.a)(l.a.mark((function _callee(){var e,t;return l.a.wrap((function _callee$(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,ze();case 2:e=a.sent,Array.isArray(e)?(t=e.filter((function(e){return!1===e.done})),v(t),D(e),s(!1),L({open:!0,message:"\u0417\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f \u0443\u0441\u043f\u0456\u0448\u043d\u043e \u0437\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u0456",type:"success"})):L({open:!0,message:"\u0421\u0442\u0430\u043b\u0430\u0441\u044f \u043f\u043e\u043c\u0438\u043b\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u0456",type:"error"});case 4:case"end":return a.stop()}}),_callee)})))()}),[]),Object(r.useEffect)((function(){Object(d.a)(l.a.mark((function _callee2(){var e;return l.a.wrap((function _callee2$(t){for(;;)switch(t.prev=t.next){case 0:if(!F.edit){t.next=5;break}return t.next=3,Re(w,F);case 3:e=t.sent,Array.isArray(e)?(D(e),G(e),N(!1),L({open:!0,message:"\u0417\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f \u0440\u0435\u0434\u0430\u0433\u043e\u0432\u0430\u043d\u043e",type:"success"})):(L({open:!0,message:e.err,type:"error"}),N(!1));case 5:case"end":return t.stop()}}),_callee2)})))()}),[F]),Object(r.useEffect)((function(){Object(d.a)(l.a.mark((function _callee3(){var e;return l.a.wrap((function _callee3$(t){for(;;)switch(t.prev=t.next){case 0:if(!W.delete){t.next=5;break}return t.next=3,Ve(W.id,w);case 3:e=t.sent,Array.isArray(e)?(D(e),G(e),b(0),L({open:!0,message:"\u0417\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f \u0432\u0438\u0434\u0430\u043b\u0435\u043d\u043e",type:"success"})):(N(!1),L({open:!0,message:e.err,type:"error"}));case 5:case"end":return t.stop()}}),_callee3)})))()}),[W]),Object(r.useEffect)((function(){G(w)}),[B]);var G=function filterOrdersHandler(e){if("\u0410\u043a\u0442\u0438\u0432\u043d\u0456"===B){var t=e.filter((function(e){return!1===e.done}));v(t)}else if("\u0417\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u0456"===B){var a=e.filter((function(e){return!0===e.done}));v(a)}};return c?Object(n.jsx)("div",{className:We.a.loader,children:Object(n.jsx)(ie.a,{size:70})}):Object(n.jsxs)("div",{children:[Object(n.jsxs)("div",{className:We.a.entityHeader,children:[Object(n.jsxs)(y.a,{component:"h2",variant:"h4",color:"textPrimary",className:We.a.entityHeaderTitle,children:[Object(n.jsx)(Ee.a,{fontSize:"large"}),"\u0417\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f"]}),Object(n.jsxs)(Te.a,{row:!0,className:We.a.formGroup,children:[Object(n.jsx)("span",{style:{width:"1px",margin:"0 1rem"}}),Object(n.jsxs)(Ie.a,{className:We.a.formControl,children:[Object(n.jsx)(He.a,{id:"status-filter",children:"\u0421\u0442\u0430\u0442\u0443\u0441"}),Object(n.jsx)(Fe.a,{labelId:"status-filter",id:"status-filter-select",value:B,onChange:function handleChangeStatusFilter(e){T(e.target.value)},children:e.map((function(e){return Object(n.jsx)(Me.a,{value:e,children:e},e)}))})]})]})]}),Object(n.jsxs)("div",{style:{boxShadow:"0.5rem 1rem 2rem gray"},children:[Object(n.jsxs)(te.a,{stickyHeader:!0,"aria-label":"sticky table",children:[Object(n.jsx)(ce.a,{children:Object(n.jsx)(re.a,{children:["\u2116","\u041d\u0430\u0437\u0432\u0430","\u041a\u0456\u043b\u044c\u043a\u0456\u0441\u0442\u044c","\u0414\u0430\u0442\u0430","\u0406\u043c'\u044f \u043a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0430","\u0421\u0442\u0430\u0442\u0443\u0441"].map((function(e){return Object(n.jsx)(ne.a,{children:e},Object(ee.a)())}))})}),Object(n.jsx)(ae.a,{children:g.slice(j*h,j*h+h).map((function(e,t){return Object(n.jsx)(Qe,{orderData:e,id:t,setEditOrder:M,setDeleteOrder:$},Object(ee.a)())}))})]}),Object(n.jsx)(se.a,{rowsPerPageOptions:[5,10,25,50],component:"div",count:g.length,rowsPerPage:h,page:j,onChangePage:function handleChangePage(e,t){b(t)},onChangeRowsPerPage:function handleChangeRowsPerPage(e){m(+e.target.value),b(0)}})]}),Object(n.jsx)(SnackbarHandler,{snack:V,setSnack:L})]})},Xe=a(542),Ye=a(541),et=a(312),tt=a.n(et),at=function Loader(){return Object(n.jsx)("div",{className:tt.a.Loader,children:Object(n.jsx)(ie.a,{color:"primary",size:70})})},nt=a(536),rt=a(537),ct=a(538),st=a(539),it=a(540),ot=a(41),lt=a.n(ot),dt=a(197),ut=a.n(dt);var jt=function InfoDialog(e){var t=e.open,a=e.setOpen,r=e.setDeleted,s=e.id,i=e.title,o=function closeModal(){a(!1)};return Object(n.jsx)(c.a.Fragment,{children:Object(n.jsxs)(ve.a,{open:t,onClose:o,"aria-labelledby":"simple-dialog-title",children:[Object(n.jsxs)(we.a,{className:ut.a.entityTitle,children:["\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438 ",i,"?"]}),Object(n.jsxs)(_e.a,{className:ut.a.deleteModal,children:[Object(n.jsx)(j.a,{onClick:o,color:"primary",children:"\u0421\u043a\u0430\u0441\u0443\u0432\u0430\u0442\u0438"}),Object(n.jsx)(j.a,{onClick:function deleteHandler(){r((function(){return{status:!0,id:s}}))},type:"submit",disableElevation:!0,variant:"contained",color:"primary",children:"\u041f\u0456\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0438"})]})]})})},bt=a(525),pt=a(526),ft=a(527),ht=a(528),mt=a(532),Ot=a(534),xt=a(4),gt=a(530),vt=a(531),_t=a(533),yt=Object(C.a)({Card:{maxWidth:345},DialogContent:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between"},ContentPhoto:{maxWidth:"100%"},Divider:{margin:"0.5rem 0"},commetariesTitle:{display:"flex",alignItems:"center"},listItem:{color:"#8c8c8c"},listIcon:{minWidth:"2rem"},subTitle:{color:"#212121"}});var Ct=function InfoDialog_InfoDialog(e){var t=e.open,a=e.setOpen,r=e.defect,s=c.a.useState(!0),i=Object(u.a)(s,2),o=i[0],l=i[1],d=yt(),b=function closeModal(){a(!1)};return Object(n.jsx)(c.a.Fragment,{children:Object(n.jsx)(ve.a,{open:t,onClose:b,"aria-labelledby":"simple-dialog-title",children:Object(n.jsxs)(bt.a,{className:d.Card,children:[Object(n.jsxs)(pt.a,{children:[Object(n.jsx)(ft.a,{className:d.ContentPhoto,component:"img",height:"200",image:""!==r.attachment?r.attachment:"https://makitweb.com/demo/broken_image/images/noimage.png",title:"\u0424\u043e\u0442\u043e \u0434\u0435\u0444\u0435\u043a\u0442\u0443"}),Object(n.jsxs)(ht.a,{children:[Object(n.jsxs)(y.a,{gutterBottom:!0,variant:"h5",component:"h2",children:["\u041a\u0456\u043c\u043d\u0430\u0442\u0430: ",r.room]}),Object(n.jsx)(z.a,{className:d.Divider}),Object(n.jsxs)(y.a,{variant:"body1",color:"textSecondary",component:"p",children:[Object(n.jsx)("span",{className:d.subTitle,children:"\u041f\u0440\u043e\u0431\u043b\u0435\u043c\u0430:"})," ",r.title]}),Object(n.jsx)(z.a,{className:d.Divider}),Object(n.jsxs)(I.a,{dense:!0,component:"div",disablePadding:!0,children:[Object(n.jsxs)(y.a,{className:d.commetariesTitle,onClick:function handleClickList(){l(!o)},variant:"body1",component:"h4",children:[Object(n.jsx)("span",{children:"\u041a\u043e\u043c\u0435\u043d\u0442\u0430\u0440\u0456"}),o?Object(n.jsx)(gt.a,{}):Object(n.jsx)(vt.a,{})]}),Object(n.jsx)(mt.a,{in:o,timeout:"auto",unmountOnExit:!0,children:r.comments.map((function(e,t){return Object(n.jsxs)(Z.a,{divider:!0,dense:!0,disableGutters:!0,className:d.listItem,children:[Object(n.jsx)(J.a,{className:Object(xt.a)(d.listItem,d.listIcon),children:Object(n.jsx)(_t.a,{})}),Object(n.jsx)(Q.a,{className:d.listItem,primary:e.message})]},t)}))})]})]})]}),Object(n.jsx)(Ot.a,{children:Object(n.jsx)(j.a,{onClick:b,variant:"contained",color:"primary",children:"\u0417\u0430\u043a\u0440\u0438\u0442\u0438"})})]})})})},wt=a(314),Dt=a(33),kt=a(558),St=a(198),Nt=a.n(St),At=c.a.createContext({}),Pt=Object(C.a)({DialogContent:{"&:first-child":{paddingTop:"0"}},DialogActions:{padding:"1rem"}});var Bt=function UpdateDialog(e){var t=e.open,a=e.setOpen,s=e.defect,i=Object(r.useContext)(At).setUpdated,o=Pt(),l={title:s.title,room:s.room,status:s.status,priority:s.priority,open_date:s.open_date},d=k.c().shape({title:k.e().min(5,"\u041d\u0430\u0434\u0442\u043e \u043a\u043e\u0440\u043e\u0442\u043a\u0438\u0439 \u043e\u043f\u0438\u0441").max(50,"\u041d\u0430\u0434\u0442\u043e \u0434\u043e\u0432\u0433\u0438\u0439 \u043e\u043f\u0438\u0441"),room:k.e().min(3,"\u041d\u0430\u0434\u0442\u043e \u043a\u043e\u0440\u043e\u0442\u043a\u0430 \u043d\u0430\u0437\u0432\u0430").max(50,"\u041d\u0430\u0434\u0442\u043e \u0434\u043e\u0432\u0433\u0430 \u043d\u0430\u0437\u0432\u0430"),status:k.e(),priority:k.b(),open_date:k.a()}),u=function closeModal(){a(!1)};return Object(n.jsx)(c.a.Fragment,{children:Object(n.jsxs)(ve.a,{open:t,onClose:u,"aria-labelledby":"simple-dialog-title",children:[Object(n.jsx)(we.a,{className:Nt.a.entityTitle,children:"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438 \u0434\u0435\u0444\u0435\u043a\u0442"}),Object(n.jsx)(D.a,{initialValues:l,validationSchema:d,onSubmit:function onSubmit(e){return function submit(e){i({status:!0,data:{id:s._id,values:Object(ke.a)(Object(ke.a)({},s),e),intialFormValues:Object(ke.a)({},l)}})}(e)},children:function children(e){var t=e.isValid,a=e.values,r=e.errors,c=e.touched,s=e.handleChange,i=e.handleBlur,l=e.handleSubmit,d=e.setFieldValue;return Object(n.jsxs)("form",{className:Nt.a.form,onSubmit:l,children:[Object(n.jsxs)(ye.a,{className:o.DialogContent,children:[Object(n.jsx)(p.a,{autoFocus:!0,margin:"dense",id:"title",label:"\u041e\u043f\u0438\u0441",fullWidth:!0,onChange:s,onBlur:i,value:a.title,helperText:c.title?r.title:"",error:c.title&&Boolean(r.title)}),Object(n.jsx)(p.a,{margin:"dense",id:"room",label:"\u041c\u0456\u0441\u0446\u0435 \u0434\u0435\u0444\u0435\u043a\u0442\u0443",fullWidth:!0,onChange:s,onBlur:i,value:a.room,helperText:c.room?r.room:"",error:c.room&&Boolean(r.room)}),Object(n.jsxs)(Ie.a,{fullWidth:!0,margin:"dense",children:[Object(n.jsx)(He.a,{id:"status-label",children:"C\u0442\u0430\u0442\u0443\u0441"}),Object(n.jsxs)(Fe.a,{labelId:"status-label",id:"status",name:"status",value:a.status,onBlur:i,onChange:s,children:[Object(n.jsx)(Me.a,{value:"open",children:"\u0412\u0456\u0434\u043a\u0440\u0438\u0442\u0438\u0439"}),Object(n.jsx)(Me.a,{value:"fixing",children:"\u0412 \u043f\u0440\u043e\u0446\u0435\u0441\u0456"}),Object(n.jsx)(Me.a,{value:"solved",children:"\u0417\u0430\u043a\u0440\u0438\u0442\u0438\u0439"})]})]}),r.status&&c.status?Object(n.jsx)("div",{children:r.status}):null,Object(n.jsxs)(Ie.a,{fullWidth:!0,margin:"dense",children:[Object(n.jsx)(He.a,{id:"status-label",children:"\u041f\u0440\u0456\u043e\u0440\u0438\u0442\u0435\u0442"}),Object(n.jsxs)(Fe.a,{labelId:"status-label",id:"priority",name:"priority",value:a.priority,onBlur:i,onChange:s,children:[Object(n.jsx)(Me.a,{value:1,children:"\u0422\u0435\u0440\u043c\u0456\u043d\u043e\u0432\u0438\u0439"}),Object(n.jsx)(Me.a,{value:2,children:"\u042f\u043a\u043d\u0430\u0439\u0448\u0432\u0438\u0434\u0448\u0435"}),Object(n.jsx)(Me.a,{value:3,children:"\u0417\u0432\u0438\u0447\u0430\u0439\u043d\u0438\u0439"}),Object(n.jsx)(Me.a,{value:4,children:"\u0412\u0456\u0434\u0443\u0441\u0442\u043d\u0456\u0439"})]})]}),r.status&&c.status?Object(n.jsx)("div",{children:r.status}):null,Object(n.jsx)(Dt.a,{utils:wt.a,children:Object(n.jsx)(kt.a,{disableToolbar:!0,variant:"inline",format:"yyyy-MM-dd",margin:"normal",id:"date-picker-inline",label:"\u0414\u0430\u0442\u0430 \u043f\u043e\u044f\u0432\u0438",name:"open_date",value:a.open_date,onChange:function onChange(e){return d("open_date",e)}})}),r.open_date&&c.open_date?Object(n.jsx)("div",{children:r.open_date}):null]}),Object(n.jsxs)(_e.a,{className:o.DialogActions,children:[Object(n.jsx)(j.a,{onClick:u,children:"\u0421\u043a\u0430\u0441\u0443\u0432\u0430\u0442\u0438"}),Object(n.jsx)(j.a,{type:"submit",disabled:!t,disableElevation:!0,variant:"contained",color:"primary",children:"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438"})]})]})}})]})})},Tt=a(565);var It=function Satus(e){var t=e.status,a=Object(r.useState)(Object(n.jsx)(Tt.a,{label:"\u0412\u0456\u0434\u043a\u0440\u0438\u0442\u0438\u0439",color:"secondary"})),c=Object(u.a)(a,2),s=c[0],i=c[1];return Object(r.useEffect)((function(){switch(t.toString()){case"all":i(Object(n.jsx)(Tt.a,{label:"\u0412\u0441\u0456",style:{backgroundColor:"#4caf50",color:"white"}}));break;case"open":i(Object(n.jsx)(Tt.a,{label:"\u0412\u0456\u0434\u043a\u0440\u0438\u0442\u0438\u0439",style:{backgroundColor:"#4caf50",color:"white"}}));break;case"fixing":i(Object(n.jsx)(Tt.a,{label:"\u0412 \u043f\u0440\u043e\u0446\u0435\u0441\u0456",style:{backgroundColor:"#ff9800",color:"white"}}));break;case"solved":i(Object(n.jsx)(Tt.a,{label:"\u0417\u0430\u043a\u0440\u0438\u0442\u0438\u0439"}));break;case"true":i(Object(n.jsx)(Tt.a,{label:"\u0410\u043a\u0442\u0438\u0432\u043d\u0438\u0439",style:{backgroundColor:"#4caf50",color:"white"}}));break;case"false":i(Object(n.jsx)(Tt.a,{label:"\u041d\u0435\u0430\u043a\u0442\u0438\u0432\u043d\u0438\u0439"}))}}),[]),s};var Ht=function DefectsTableRow(e){var t=e.defect,a=e.index,s=e.setStatus,i=Object(r.useContext)(At).setDeleted,o=c.a.useState(!1),l=Object(u.a)(o,2),d=l[0],b=l[1],p=c.a.useState(!1),f=Object(u.a)(p,2),h=f[0],m=f[1],O=c.a.useState(!1),x=Object(u.a)(O,2),g=x[0],v=x[1],_=function openModal(e){switch(e){case"update":b(!0);break;case"info":m(!0);break;case"delete":v(!0)}};return Object(n.jsxs)(re.a,{hover:!0,role:"checkbox",tabIndex:-1,children:[Object(n.jsx)(ne.a,{children:a}),Object(n.jsx)(ne.a,{children:t.title}),Object(n.jsx)(ne.a,{children:t.room}),Object(n.jsx)(ne.a,{align:"center",children:Object(n.jsx)(It,{status:t.status})}),Object(n.jsxs)(ne.a,{align:"center",children:[Object(n.jsx)(nt.a,{title:"\u0414\u0435\u0442\u0430\u043b\u044c\u043d\u0456\u0448\u0430 \u0456\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0456\u044f",arrow:!0,children:Object(n.jsx)(j.a,{onClick:function onClick(){return _("info")},disableElevation:!0,variant:"contained",className:lt.a.button,color:"primary",children:Object(n.jsx)(rt.a,{})})}),Object(n.jsx)(nt.a,{title:"\u041f\u043e\u0437\u043d\u0430\u0447\u0438\u0442\u0438 \u0432\u0438\u043a\u043e\u043d\u0430\u043d\u0438\u043c",arrow:!0,children:Object(n.jsx)(j.a,{onClick:function checkHandler(){s({status:!0,data:Object(ke.a)({},t),value:"solved"})},disableElevation:!0,variant:"contained",className:lt.a.button,color:"primary",children:Object(n.jsx)(ct.a,{})})}),Object(n.jsx)(nt.a,{title:"\u041e\u043d\u043e\u0432\u0438\u0442\u0438",arrow:!0,children:Object(n.jsx)(j.a,{disableElevation:!0,variant:"contained",className:lt.a.button,color:"primary",onClick:function onClick(){return _("update")},children:Object(n.jsx)(st.a,{})})}),Object(n.jsx)(nt.a,{title:"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438",arrow:!0,children:Object(n.jsx)(j.a,{onClick:function onClick(){return _("delete")},disableElevation:!0,variant:"contained",className:lt.a.button,color:"primary",children:Object(n.jsx)(it.a,{})})})]}),Object(n.jsx)(Bt,{open:d,setOpen:b,defect:t}),Object(n.jsx)(Ct,{open:h,setOpen:m,defect:t}),Object(n.jsx)(jt,{open:g,setOpen:v,setDeleted:i,title:"\u0434\u0435\u0444\u0435\u043a\u0442",id:t._id})]})};function getDefects(){return _getDefects.apply(this,arguments)}function _getDefects(){return(_getDefects=Object(d.a)(l.a.mark((function _callee(){return l.a.wrap((function _callee$(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,je.get("".concat(m,"defect/all")).then((function(e){return e.data}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),_callee)})))).apply(this,arguments)}function editDefect(e,t){return _editDefect.apply(this,arguments)}function _editDefect(){return(_editDefect=Object(d.a)(l.a.mark((function _callee2(e,t){return l.a.wrap((function _callee2$(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,je.patch("".concat(m,"defect/update/").concat(e),t).then((function(e){return e.data}));case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}}),_callee2)})))).apply(this,arguments)}function _deleteDefect(){return(_deleteDefect=Object(d.a)(l.a.mark((function _callee3(e){return l.a.wrap((function _callee3$(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,je.delete("".concat(m,"defect/delete/").concat(e)).then((function(e){return e.data}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),_callee3)})))).apply(this,arguments)}function deleteModeSubmit(e,t,a,n){(function deleteDefect(e){return _deleteDefect.apply(this,arguments)})(e).then((function(r){"ok"===r.response&&(a((function(t){return t.filter((function(t){return t._id!==e}))})),n(),t({open:!0,message:"\u0414\u0435\u0444\u0435\u043a\u0442 \u0443\u0441\u043f\u0456\u0448\u043d\u043e \u0432\u0438\u0434\u0430\u043b\u0435\u043d\u043e",type:"success"}))})).catch((function(e){return t({open:!0,message:"\u041d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0456 \u0441\u0442\u0430\u043b\u0430\u0441\u044c \u043f\u043e\u043c\u0438\u043b\u043a\u0430 - ".concat(e),type:"error"})}))}var Ft=[{id:"id",label:"\u2116",minWidth:"10%"},{id:"title",label:"\u041e\u043f\u0438\u0441",minWidth:"40%"},{id:"room",label:"\u041f\u0440\u0438\u043c\u0456\u0449\u0435\u043d\u043d\u043d\u044f",minWidth:"15%"},{id:"status",label:"\u0421\u0442\u0430\u0442\u0443\u0441",minWidth:"20%",align:"center"},{id:"operations",label:"\u041e\u043f\u0435\u0440\u0430\u0446\u0456\u0457",minWidth:"15%",align:"center"}],Mt=[{title:"\u0424\u0456\u043b\u044c\u0442\u0440 \u0432\u0456\u0434\u0441\u0443\u0442\u043d\u0456\u0439",value:"all"},{title:"\u0412\u0456\u0434\u043a\u0440\u0438\u0442\u0456 \u0434\u0435\u0444\u0435\u043a\u0442\u0438",value:"open"},{title:"\u0414\u0435\u0444\u0435\u043a\u0442\u0438 \u0432 \u043f\u0440\u043e\u0446\u0435\u0441\u0456",value:"fixing"},{title:"\u0417\u0430\u043a\u0440\u0438\u0442\u0456 \u0434\u0435\u0444\u0435\u043a\u0442\u0438",value:"solved"}],Et=[{title:"\u0424\u0456\u043b\u044c\u0442\u0440 \u0432\u0456\u0434\u0441\u0443\u0442\u043d\u0456\u0439",value:0},{title:"\u0422\u0435\u0440\u043c\u0456\u043d\u043e\u0432\u043e",value:1},{title:"\u042f\u043a\u043d\u0430\u0439\u0448\u0432\u0438\u0434\u0448\u0435",value:2},{title:"\u0417\u0432\u0438\u0447\u0430\u0439\u043d\u0435 \u0437\u0430\u0432\u0434\u0430\u043d\u043d\u044f",value:3},{title:"\u041f\u0440\u0456\u043e\u0440\u0438\u0442\u0435\u0442 \u0432\u0456\u0434\u0441\u0443\u0442\u043d\u0456\u0439",value:4}];var Ut=function DefectsTable(){var e=c.a.useState(!1),t=Object(u.a)(e,2),a=(t[0],t[1]),s=Object(r.useState)(localStorage.getItem("admin_username")),i=Object(u.a)(s,2),o=i[0],l=(i[1],Object(r.useState)({open:!1,message:"",type:""})),d=Object(u.a)(l,2),j=d[0],b=d[1],p=Object(r.useState)(Array),f=Object(u.a)(p,2),h=f[0],m=f[1],O=Object(r.useState)(Array),x=Object(u.a)(O,2),g=x[0],v=x[1],_=Object(r.useState)(!1),C=Object(u.a)(_,2),w=C[0],D=C[1],k=c.a.useState(0),S=Object(u.a)(k,2),N=S[0],A=S[1],P=c.a.useState(10),B=Object(u.a)(P,2),T=B[0],I=B[1],H=c.a.useState({status:!1,id:""}),F=Object(u.a)(H,2),M=F[0],E=F[1],U=c.a.useState({status:!1,data:{}}),W=Object(u.a)(U,2),$=W[0],z=W[1],R=c.a.useState({status:!1,data:{},value:"none"}),V=Object(u.a)(R,2),L=V[0],G=V[1],q=c.a.useState(Mt[0].value),Z=Object(u.a)(q,2),J=Z[0],Q=Z[1],K=c.a.useState(Et[0].value),X=Object(u.a)(K,2),Y=X[0],ie=X[1],oe=function closeModal(){a(!1)};return Object(r.useEffect)((function(){getDefects().then((function(e){D(!0),m(e.defects),v(e.defects)}))}),[]),Object(r.useEffect)((function(){M.status&&deleteModeSubmit(M.id,b,m,oe)}),[M]),Object(r.useEffect)((function(){$.status&&function updateModeSubmit(e,t,a,n,r){if(e.values.title===e.intialFormValues.title&&e.values.room===e.intialFormValues.room&&e.values.status===e.intialFormValues.status&&e.values.open_date===e.intialFormValues.open_date&&e.values.priority===e.intialFormValues.priority)a({open:!0,message:"\u041f\u043e\u0442\u0440\u0456\u0431\u043d\u043e \u0449\u043e\u0441\u044c \u0437\u043c\u0456\u043d\u0438\u0442\u0438",type:"info"});else{var c=Object(ke.a)(Object(ke.a)({},e.values),{},{open_date:new Date(e.values.open_date).toISOString().substr(0,10),admin_username:t});editDefect(e.id,c).then((function(t){"ok"===t.response&&(n((function(t){return t.map((function(t){return t._id===e.id?t=Object(ke.a)({_id:e.id},e.values):t}))})),r(),a({open:!0,message:"\u0414\u0435\u0444\u0435\u043a\u0442 \u0443\u0441\u043f\u0456\u0448\u043d\u043e \u043e\u043d\u043e\u0432\u043b\u0435\u043d\u043e",type:"success"}))})).catch((function(e){return a({open:!0,message:"\u041d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0456 \u0441\u0442\u0430\u043b\u0430\u0441\u044c \u043f\u043e\u043c\u0438\u043b\u043a\u0430 - ".concat(e),type:"error"})}))}}($.data,o,b,m,oe)}),[$]),Object(r.useEffect)((function(){L.status&&function checkModeSumbit(e,t,a,n,r){var c=e._id,s=Object(ke.a)(Object(ke.a)({},e),{},{_id:c,status:a,open_date:new Date(e.open_date).toISOString().substr(0,10),admin_username:t});editDefect(c,s).then((function(e){"ok"===e.response&&(r((function(t){return t.map((function(t){return t._id===c?t=Object(ke.a)({},e.defect):t}))})),n({open:!0,message:"\u0414\u0435\u0444\u0435\u043a\u0442 \u0432\u0438\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043e",type:"success"}))})).catch((function(e){return n({open:!0,message:"\u041d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0456 \u0441\u0442\u0430\u043b\u0430\u0441\u044c \u043f\u043e\u043c\u0438\u043b\u043a\u0430 - ".concat(e),type:"error"})}))}(L.data,o,L.value,b,m)}),[L]),Object(r.useEffect)((function(){!function FilterByStatus(e,t,a,n){switch(e){case"all":getDefects().then((function(e){a(e.defects),n(e.defects)}));break;case"open":case"fixing":case"solved":a(t.filter((function(t){return t.status===e})));break;default:a(t)}}(J,g,m,v)}),[J]),Object(r.useEffect)((function(){!function FilterByPriority(e,t,a,n){switch(e){case 0:getDefects().then((function(e){a(e.defects),n(e.defects)}));break;case 1:case 2:case 3:case 4:a(t.filter((function(t){return t.priority===e})));break;default:a(t)}}(Y,g,m,v)}),[Y]),Object(n.jsx)(At.Provider,{value:{setDeleted:E,setUpdated:z},children:w?Object(n.jsxs)(c.a.Fragment,{children:[Object(n.jsxs)("div",{className:lt.a.entityHeader,children:[Object(n.jsxs)(y.a,{component:"h2",variant:"h4",color:"textPrimary",className:lt.a.entityHeaderTitle,children:[Object(n.jsx)(Ye.a,{fontSize:"large"}),"\u0421\u043f\u0438\u0441\u043e\u043a \u0434\u0435\u0444\u0435\u043a\u0442\u0456\u0432"]}),Object(n.jsxs)(Te.a,{row:!0,className:lt.a.formGroup,children:[Object(n.jsx)(y.a,{style:{color:"rgba(111, 111, 111, 0.87)"},children:"\u0412\u0438\u0431\u0435\u0440\u0456\u0442\u044c \u043e\u0434\u0438\u043d \u0456\u0437 \u0444\u0456\u043b\u044c\u0442\u0440\u0456\u0432"}),Object(n.jsx)("span",{style:{width:"1px",margin:"0 1rem"}}),Object(n.jsxs)(Ie.a,{className:lt.a.formControl,children:[Object(n.jsx)(He.a,{id:"status-filter",children:"\u0424\u0456\u043b\u044c\u0442\u0440\u0438 \u043f\u043e \u0441\u0442\u0430\u0442\u0443\u0441\u0443"}),Object(n.jsx)(Fe.a,{labelId:"status-filter",id:"status-filter-select",value:J,onChange:function handleChangeStatusFilter(e){Q(e.target.value)},children:Mt.map((function(e){return Object(n.jsx)(Me.a,{value:e.value,children:e.title},e.value)}))})]}),Object(n.jsxs)(Ie.a,{className:lt.a.formControl,children:[Object(n.jsx)(He.a,{id:"status-filter",children:"\u0424\u0456\u043b\u044c\u0442\u0440\u0438 \u043f\u043e \u043f\u0440\u0456\u043e\u0440\u0438\u0442\u0435\u0442\u0443"}),Object(n.jsx)(Fe.a,{labelId:"status-filter",id:"status-filter-select",value:Y,onChange:function handleChangePriorityFilter(e){ie(e.target.value)},children:Et.map((function(e){return Object(n.jsx)(Me.a,{value:e.value,children:e.title},e.value)}))})]})]})]}),Object(n.jsxs)(Pe.a,{elevation:6,children:[Object(n.jsx)(Xe.a,{className:lt.a.entityTableContainer,children:Object(n.jsxs)(te.a,{stickyHeader:!0,className:lt.a.entityTable,children:[Object(n.jsx)(ce.a,{children:Object(n.jsx)(re.a,{children:Ft.map((function(e){return Object(n.jsx)(ne.a,{align:e.align,style:{minWidth:e.minWidth},children:e.label},Object(ee.a)())}))})}),Object(n.jsx)(ae.a,{children:h.slice(N*T,N*T+T).map((function(e,t){return Object(n.jsx)(Ht,{index:t+1,defect:e,setStatus:G},Object(ee.a)())}))})]})}),Object(n.jsx)(se.a,{rowsPerPageOptions:[10,25,100],labelRowsPerPage:"\u041a-\u0441\u0442\u044c \u0440\u044f\u0434\u043a\u0456\u0432",component:"div",count:h.length,rowsPerPage:T,page:N,onChangePage:function handleChangePage(e,t){A(t)},onChangeRowsPerPage:function handleChangeRowsPerPage(e){I(+e.target.value),A(0)}})]}),Object(n.jsx)(SnackbarHandler,{snack:j,setSnack:b})]}):Object(n.jsx)(at,{})})},Wt=a(544),$t=a(543),zt=a(44),Rt=a.n(zt),Vt=a(199),Lt=a.n(Vt),Gt=Object(C.a)({DialogContent:{"&:first-child":{paddingTop:"0"}},DialogActions:{padding:"1rem"}});var qt=function UpdateDialog_UpdateDialog_UpdateDialog(e){var t=e.open,a=e.setOpen,r=e.setUpdated,s=e.user,i=Gt(),o={first_name:s.first_name,last_name:"Last name is missing"===s.last_name?"\u041f\u0440\u0456\u0437\u0432\u0438\u0449\u0435 \u0432\u0456\u0434\u0441\u0443\u0442\u043d\u0454":s.last_name,enabled:s.enabled,position:s.position},l=k.c().shape({first_name:k.e().min(3,"\u041d\u0430\u0434\u0442\u043e \u043a\u043e\u0440\u043e\u0442\u043a\u0435 \u0456\u043c'\u044f").max(50,"\u041d\u0430\u0434\u0442\u043e \u0434\u043e\u0432\u0433\u0435 \u0456\u043c'\u044f"),last_name:k.e().min(3,"\u041d\u0430\u0434\u0442\u043e \u043a\u043e\u0440\u043e\u0442\u043a\u0430 \u043d\u0430\u0437\u0432\u0430").max(50,"\u041d\u0430\u0434\u0442\u043e \u0434\u043e\u0432\u0433\u0430 \u043d\u0430\u0437\u0432\u0430"),enabled:k.e(),position:k.e()}),d=function closeModal(){a(!1)};return Object(n.jsx)(c.a.Fragment,{children:Object(n.jsxs)(ve.a,{open:t,onClose:d,"aria-labelledby":"simple-dialog-title",children:[Object(n.jsx)(we.a,{className:Lt.a.entityTitle,children:"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438 \u0434\u0435\u0444\u0435\u043a\u0442"}),Object(n.jsx)(D.a,{initialValues:o,validationSchema:l,onSubmit:function onSubmit(e){return function submit(e){r({status:!0,data:{id:s._id,values:Object(ke.a)({username:s.username,chat_id:s.chat_id},e),intialFormValues:Object(ke.a)({},o)}})}(e)},children:function children(e){var t=e.isValid,a=e.values,r=e.errors,c=e.touched,s=e.handleChange,o=e.handleBlur,l=e.handleSubmit;return Object(n.jsxs)("form",{className:Lt.a.form,onSubmit:l,children:[Object(n.jsxs)(ye.a,{className:i.DialogContent,children:[Object(n.jsx)(p.a,{autoFocus:!0,margin:"dense",id:"title",name:"first_name",label:"\u0406\u043c'\u044f",fullWidth:!0,onChange:s,onBlur:o,value:a.first_name,helperText:c.first_name?r.first_name:"",error:c.first_name&&Boolean(r.first_name)}),Object(n.jsx)(p.a,{margin:"dense",id:"last_name",label:"\u041f\u0440\u0456\u0437\u0432\u0438\u0449\u0435",fullWidth:!0,onChange:s,onBlur:o,value:a.last_name,helperText:c.last_name?r.last_name:"",error:c.last_name&&Boolean(r.last_name)}),Object(n.jsxs)(Ie.a,{fullWidth:!0,margin:"dense",children:[Object(n.jsx)(He.a,{id:"status-label",children:"\u0414\u043e\u0441\u0442\u0443\u043f"}),Object(n.jsxs)(Fe.a,{labelId:"enabled-label",id:"enabled",name:"enabled",value:a.enabled,onBlur:o,onChange:s,children:[Object(n.jsx)(Me.a,{value:"true",children:"\u0410\u043a\u0442\u0438\u0432\u043d\u0438\u0439"}),Object(n.jsx)(Me.a,{value:"false",children:"\u041d\u0435\u0430\u043a\u0442\u0438\u0432\u043d\u0438\u0439"})]})]}),r.enabled&&c.enabled?Object(n.jsx)("div",{children:r.enabled}):null,Object(n.jsxs)(Ie.a,{fullWidth:!0,margin:"dense",children:[Object(n.jsx)(He.a,{id:"status-label",children:"\u041f\u043e\u0441\u0430\u0434\u0430"}),Object(n.jsxs)(Fe.a,{labelId:"position-label",id:"position",name:"position",value:a.position,onBlur:o,onChange:s,children:[Object(n.jsx)(Me.a,{value:"Cleaner",children:"\u041f\u0440\u0438\u0431\u0438\u0440\u0430\u043b\u044c\u043d\u0438\u0446\u044f"}),Object(n.jsx)(Me.a,{value:"Repairer",children:"\u0422\u0435\u0445\u043d\u0456\u0447\u043d\u0438\u0439 \u043f\u0440\u0430\u0446\u0456\u0432\u043d\u0438\u043a"}),Object(n.jsx)(Me.a,{value:"Merchandiser",children:"\u041c\u0435\u0440\u0447\u0430\u043d\u0434\u0430\u0439\u0437\u0435\u0440"}),Object(n.jsx)(Me.a,{value:"None",children:"\u041f\u043e\u0441\u0430\u0434\u0430 \u0432\u0456\u0434\u0441\u0443\u0442\u043d\u044f"})]})]}),r.position&&c.position?Object(n.jsx)("div",{children:r.position}):null]}),Object(n.jsxs)(_e.a,{className:i.DialogActions,children:[Object(n.jsx)(j.a,{onClick:d,children:"\u0421\u043a\u0430\u0441\u0443\u0432\u0430\u0442\u0438"}),Object(n.jsx)(j.a,{type:"submit",disabled:!t,disableElevation:!0,variant:"contained",color:"primary",children:"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438"})]})]})}})]})})};function getUsers(){return _getUsers.apply(this,arguments)}function _getUsers(){return(_getUsers=Object(d.a)(l.a.mark((function _callee(){return l.a.wrap((function _callee$(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,je.get("".concat(m,"user/all")).then((function(e){return e.data}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),_callee)})))).apply(this,arguments)}function editUser(e,t){return _editUser.apply(this,arguments)}function _editUser(){return(_editUser=Object(d.a)(l.a.mark((function _callee2(e,t){return l.a.wrap((function _callee2$(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,je.patch("".concat(m,"user/update/").concat(e),t).then((function(e){return e.data}));case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}}),_callee2)})))).apply(this,arguments)}function _deleteUser(){return(_deleteUser=Object(d.a)(l.a.mark((function _callee3(e){return l.a.wrap((function _callee3$(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,je.delete("".concat(m,"user/delete/").concat(e)).then((function(e){return e.data}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),_callee3)})))).apply(this,arguments)}function UsersService_deleteModeSubmit(e,t,a,n){(function deleteUser(e){return _deleteUser.apply(this,arguments)})(e).then((function(r){"ok"===r.response&&(a((function(t){return t.filter((function(t){return t._id!==e}))})),n(),t({open:!0,message:"\u041a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0430 \u0443\u0441\u043f\u0456\u0448\u043d\u043e \u0432\u0438\u0434\u0430\u043b\u0435\u043d\u043e",type:"success"}))})).catch((function(e){return t({open:!0,message:"\u041d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0456 \u0441\u0442\u0430\u043b\u0430\u0441\u044c \u043f\u043e\u043c\u0438\u043b\u043a\u0430 - ".concat(e),type:"error"})}))}var Zt=function UsersTableRow_DefectsTableRow(e){var t=e.user,a=e.index,r=e.setEnabled,s=e.setDeleted,i=e.setUpdated,o=c.a.useState(!1),l=Object(u.a)(o,2),d=l[0],b=l[1],p=c.a.useState(!1),f=Object(u.a)(p,2),h=f[0],m=f[1],O=function StylizePosition(e){switch(e){case"None":return"\u041f\u043e\u0441\u0430\u0434\u0430 \u0432\u0456\u0434\u0441\u0443\u0442\u043d\u044f";case"Cleaner":return"\u041f\u0440\u0438\u0431\u0438\u0440\u0430\u043b\u044c\u043d\u0438\u0446\u044f";case"Repairer":return"\u0422\u0435\u0445\u043d\u0456\u0447\u043d\u0438\u0439 \u043f\u0440\u0430\u0446\u0456\u0432\u043d\u0438\u043a";case"Merchandiser":return"\u041c\u0435\u0440\u0447\u0430\u043d\u0434\u0430\u0439\u0437\u0435\u0440";default:return"\u041f\u043e\u0441\u0430\u0434\u0430 \u0432\u0456\u0434\u0441\u0443\u0442\u043d\u044f"}}(t.position),x=function openModal(e){switch(e){case"update":b(!0);break;case"delete":m(!0)}};return Object(n.jsxs)(re.a,{hover:!0,role:"checkbox",tabIndex:-1,children:[Object(n.jsx)(ne.a,{children:a}),Object(n.jsx)(ne.a,{children:t.username}),Object(n.jsxs)(ne.a,{children:["".concat(t.first_name," "),"Last name is missing"===t.last_name?Object(n.jsx)(nt.a,{title:"\u041f\u0440\u0456\u0437\u0432\u0438\u0449\u0435 \u0432\u0456\u0434\u0441\u0443\u0442\u043d\u0454",children:Object(n.jsx)(M.a,{size:"small",children:Object(n.jsx)($t.a,{})})}):t.last_name]}),Object(n.jsx)(ne.a,{children:O}),Object(n.jsx)(ne.a,{align:"center",children:Object(n.jsx)(It,{status:t.enabled})}),Object(n.jsxs)(ne.a,{align:"center",children:[Object(n.jsx)(nt.a,{title:"\u0410\u043a\u0442\u0438\u0432\u0443\u0432\u0430\u0442\u0438",arrow:!0,children:Object(n.jsx)(j.a,{onClick:function checkHandler(){r({status:!0,data:Object(ke.a)({},t),value:!0})},disableElevation:!0,variant:"contained",className:Rt.a.button,color:"primary",children:Object(n.jsx)(ct.a,{})})}),Object(n.jsx)(nt.a,{title:"\u041e\u043d\u043e\u0432\u0438\u0442\u0438",arrow:!0,children:Object(n.jsx)(j.a,{disableElevation:!0,variant:"contained",className:Rt.a.button,color:"primary",onClick:function onClick(){return x("update")},children:Object(n.jsx)(st.a,{})})}),Object(n.jsx)(nt.a,{title:"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438",arrow:!0,children:Object(n.jsx)(j.a,{onClick:function onClick(){return x("delete")},disableElevation:!0,variant:"contained",className:Rt.a.button,color:"primary",children:Object(n.jsx)(it.a,{})})})]}),Object(n.jsx)(qt,{open:d,setOpen:b,setUpdated:i,user:t}),Object(n.jsx)(jt,{title:"\u043a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0430",open:h,setOpen:m,id:t._id,setDeleted:s})]})},Jt=[{id:"id",label:"\u2116",minWidth:"10%"},{id:"login",label:"\u0423\u043d\u0456\u043a\u0430\u043b\u044c\u043d\u0435 \u0456\u043c'\u044f \u0432 \u0441\u0438\u0441\u0442\u0435\u043c\u0456",minWidth:"25%"},{id:"fullname",label:"\u041f\u043e\u0432\u043d\u0435 \u0456\u043c'\u044f",minWidth:"30%"},{id:"position",label:"\u041f\u043e\u0441\u0430\u0434\u0430",minWidth:"10%"},{id:"enabled",label:"\u0414\u043e\u0441\u0442\u0443\u043f",minWidth:"15%",align:"center"},{id:"operations",label:"\u041e\u043f\u0435\u0440\u0430\u0446\u0456\u0457",minWidth:"10%",align:"center"}],Qt=[{title:"\u0424\u0456\u043b\u044c\u0442\u0440 \u0432\u0456\u0434\u0441\u0443\u0442\u043d\u0456\u0439",value:"No filter"},{title:"\u041d\u0435\u0430\u043a\u0442\u0438\u0432\u043e\u0432\u0430\u043d\u0438\u0439",value:"false"},{title:"\u0410\u043a\u0442\u0438\u0432\u043e\u0432\u0430\u043d\u0438\u0439",value:"true"}],Kt=[{title:"\u0424\u0456\u043b\u044c\u0442\u0440 \u0432\u0456\u0434\u0441\u0443\u0442\u043d\u0456\u0439",value:"No filter"},{title:"\u041f\u043e\u0441\u0430\u0434\u0430 \u0432\u0456\u0434\u0441\u0443\u0442\u043d\u044f",value:"None"},{title:"\u041f\u0440\u0438\u0431\u0438\u0440\u0430\u043b\u044c\u043d\u0438\u0446\u044f",value:"Cleaner"},{title:"\u0422\u0435\u0445\u043d\u0456\u0447\u043d\u0438\u0439 \u043f\u0440\u0430\u0446\u0456\u0432\u043d\u0438\u043a",value:"Repairer"},{title:"\u041c\u0435\u0440\u0447\u0430\u043d\u0434\u0430\u0439\u0437\u0435\u0440",value:"Merchandiser"}];var Xt=function UsersTable(){var e=c.a.useState(!1),t=Object(u.a)(e,2),a=(t[0],t[1]),s=Object(r.useState)({open:!1,message:"",type:""}),i=Object(u.a)(s,2),o=i[0],l=i[1],d=Object(r.useState)(Array),j=Object(u.a)(d,2),b=j[0],p=j[1],f=Object(r.useState)(Array),h=Object(u.a)(f,2),m=h[0],O=h[1],x=Object(r.useState)(!1),g=Object(u.a)(x,2),v=g[0],_=g[1],C=c.a.useState(0),w=Object(u.a)(C,2),D=w[0],k=w[1],S=c.a.useState(10),N=Object(u.a)(S,2),A=N[0],P=N[1],B=c.a.useState({status:!1,id:""}),T=Object(u.a)(B,2),I=T[0],H=T[1],F=c.a.useState({status:!1,data:{}}),M=Object(u.a)(F,2),E=M[0],U=M[1],W=c.a.useState({status:!1,data:{},value:"none"}),$=Object(u.a)(W,2),z=$[0],R=$[1],V=c.a.useState(Qt[0].value),L=Object(u.a)(V,2),G=L[0],q=L[1],Z=c.a.useState(Kt[0].value),J=Object(u.a)(Z,2),Q=J[0],K=J[1],X=function closeModal(){a(!1)};return Object(r.useEffect)((function(){getUsers().then((function(e){_(!0),p(e.users),O(e.users)}))}),[]),Object(r.useEffect)((function(){I.status&&UsersService_deleteModeSubmit(I.id,l,p,X)}),[I]),Object(r.useEffect)((function(){E.status&&function UsersService_updateModeSubmit(e,t,a,n){if(e.values.first_name===e.intialFormValues.first_name&&e.values.last_name===e.intialFormValues.last_name&&e.values.enabled===e.intialFormValues.enabled&&e.values.position===e.intialFormValues.position)t({open:!0,message:"\u041f\u043e\u0442\u0440\u0456\u0431\u043d\u043e \u0449\u043e\u0441\u044c \u0437\u043c\u0456\u043d\u0438\u0442\u0438",type:"info"});else{var r=Object(ke.a)({},e.values);editUser(e.id,r).then((function(r){console.log(r),"ok"===r.response&&(a((function(t){return t.map((function(t){return t._id===e.id?t=Object(ke.a)({_id:e.id},e.values):t}))})),n(),t({open:!0,message:"\u041a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0430 \u0443\u0441\u043f\u0456\u0448\u043d\u043e \u043e\u043d\u043e\u0432\u043b\u0435\u043d\u043e",type:"success"}))})).catch((function(e){return t({open:!0,message:"\u041d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0456 \u0441\u0442\u0430\u043b\u0430\u0441\u044c \u043f\u043e\u043c\u0438\u043b\u043a\u0430 - ".concat(e),type:"error"})}))}}(E.data,l,p,X)}),[E]),Object(r.useEffect)((function(){z.status&&function UsersService_checkModeSumbit(e,t,a,n){var r=e._id,c=Object(ke.a)(Object(ke.a)({},e),{},{enabled:t});editUser(r,c).then((function(e){console.log(e),"ok"===e.response&&(n((function(t){return t.map((function(t){return t._id===r?t=Object(ke.a)({},e.user):t}))})),a({open:!0,message:"\u0414\u043e\u0441\u0442\u0443\u043f \u043a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0430 \u0430\u043a\u0442\u0438\u0432\u043e\u0432\u0430\u043d\u043e",type:"success"}))})).catch((function(e){return a({open:!0,message:"\u041d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0456 \u0441\u0442\u0430\u043b\u0430\u0441\u044c \u043f\u043e\u043c\u0438\u043b\u043a\u0430 - ".concat(e),type:"error"})}))}(z.data,z.value,l,p)}),[z]),Object(r.useEffect)((function(){!function FilterByAccess(e,t,a,n){switch(e){case"No filter":getUsers().then((function(e){a(e.users),n(e.users)}));break;case"true":a(t.filter((function(e){return!0===e.enabled})));break;case"false":a(t.filter((function(e){return!1===e.enabled})));break;default:a(t)}}(G,m,p,O)}),[G]),Object(r.useEffect)((function(){!function FilterByPosition(e,t,a,n){switch(e){case"No filter":getUsers().then((function(e){a(e.users),n(e.users)}));break;case"None":case"Cleaner":case"Repairer":case"Merchandiser":a(t.filter((function(t){return t.position===e})));break;default:a(t)}}(Q,m,p,O)}),[Q]),Object(n.jsx)(c.a.Fragment,{children:v?Object(n.jsxs)(c.a.Fragment,{children:[Object(n.jsxs)("div",{className:Rt.a.entityHeader,children:[Object(n.jsxs)(y.a,{component:"h2",variant:"h4",color:"textPrimary",className:Rt.a.entityHeaderTitle,children:[Object(n.jsx)(Wt.a,{fontSize:"large"}),"\u0421\u043f\u0438\u0441\u043e\u043a \u043a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0456\u0432"]}),Object(n.jsxs)(Te.a,{row:!0,className:Rt.a.formGroup,children:[Object(n.jsx)(y.a,{style:{color:"rgba(111, 111, 111, 0.87)"},children:"\u0412\u0438\u0431\u0435\u0440\u0456\u0442\u044c \u043e\u0434\u0438\u043d \u0456\u0437 \u0444\u0456\u043b\u044c\u0442\u0440\u0456\u0432"}),Object(n.jsx)("span",{style:{width:"1px",margin:"0 1rem"}}),Object(n.jsxs)(Ie.a,{className:Rt.a.formControl,children:[Object(n.jsx)(He.a,{id:"access-filter",children:"\u0424\u0456\u043b\u044c\u0442\u0440 \u0434\u043e\u0441\u0442\u0443\u043f\u0443"}),Object(n.jsx)(Fe.a,{labelId:"access-filter",id:"access-filter-select",value:G,onChange:function handleChangeAccessFilter(e){q(e.target.value)},children:Qt.map((function(e){return Object(n.jsx)(Me.a,{value:e.value,children:e.title},e.value)}))})]}),Object(n.jsxs)(Ie.a,{className:Rt.a.formControl,children:[Object(n.jsx)(He.a,{id:"position-filter",children:"\u0424\u0456\u043b\u044c\u0442\u0440\u0438 \u043f\u043e \u043f\u043e\u0441\u0430\u0434\u0456"}),Object(n.jsx)(Fe.a,{labelId:"position-filter",id:"position-filter-select",value:Q,onChange:function handleChangePostionFilter(e){K(e.target.value)},children:Kt.map((function(e){return Object(n.jsx)(Me.a,{value:e.value,children:e.title},e.value)}))})]})]})]}),Object(n.jsxs)(Pe.a,{elevation:6,children:[Object(n.jsx)(Xe.a,{className:Rt.a.entityTableContainer,children:Object(n.jsxs)(te.a,{stickyHeader:!0,className:Rt.a.entityTable,children:[Object(n.jsx)(ce.a,{children:Object(n.jsx)(re.a,{children:Jt.map((function(e){return Object(n.jsx)(ne.a,{align:e.align,style:{minWidth:e.minWidth},children:e.label},Object(ee.a)())}))})}),Object(n.jsx)(ae.a,{children:b.slice(D*A,D*A+A).map((function(e,t){return Object(n.jsx)(Zt,{index:t+1,user:e,setEnabled:R,setDeleted:H,setUpdated:U},Object(ee.a)())}))})]})}),Object(n.jsx)(se.a,{rowsPerPageOptions:[10,25,100],labelRowsPerPage:"\u041a-\u0441\u0442\u044c \u0440\u044f\u0434\u043a\u0456\u0432",component:"div",count:b.length,rowsPerPage:A,page:D,onChangePage:function handleChangePage(e,t){k(t)},onChangeRowsPerPage:function handleChangeRowsPerPage(e){P(+e.target.value),k(0)}})]}),Object(n.jsx)(SnackbarHandler,{snack:o,setSnack:l})]}):Object(n.jsx)(at,{})})},Yt=a(549);function _getDefectsNumbers(){return(_getDefectsNumbers=Object(d.a)(l.a.mark((function _callee2(e){var t,a,n,r,c,s,i;return l.a.wrap((function _callee2$(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,getDefects().then((function(e){return e.defects}));case 2:if(!((t=o.sent).length<=0)){o.next=6;break}return e({open:!0,message:"\u0414\u0435\u0444\u0435\u043a\u0442\u0438 \u0432\u0456\u0434\u0441\u0443\u0442\u043d\u0456",type:"info"}),o.abrupt("return",{OpenDefectsCount:0,ProccessDefectsCount:0,ClosedDefectsCount:0});case 6:a=0,n=0,r=0,c=Object($e.a)(t),o.prev=10,c.s();case 12:if((s=c.n()).done){o.next=25;break}i=s.value,o.t0=i.status,o.next="open"===o.t0?17:"fixing"===o.t0?19:"solved"===o.t0?21:23;break;case 17:return a++,o.abrupt("break",23);case 19:return n++,o.abrupt("break",23);case 21:return r++,o.abrupt("break",23);case 23:o.next=12;break;case 25:o.next=30;break;case 27:o.prev=27,o.t1=o.catch(10),c.e(o.t1);case 30:return o.prev=30,c.f(),o.finish(30);case 33:return o.abrupt("return",{OpenDefectsCount:a,ProccessDefectsCount:n,ClosedDefectsCount:r});case 34:case"end":return o.stop()}}),_callee2,null,[[10,27,30,33]])})))).apply(this,arguments)}function getDefectsByDateAndStatus(e,t,a){return _getDefectsByDateAndStatus.apply(this,arguments)}function _getDefectsByDateAndStatus(){return(_getDefectsByDateAndStatus=Object(d.a)(l.a.mark((function _callee3(e,t,a){return l.a.wrap((function _callee3$(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,je.get("".concat(m,"defect/getByStatus"),{params:{status:t,date_type:"open_date",start:a,end:(new Date).toISOString().substr(0,10)}}).then((function(e){if(200===e.status)return e.data})).catch((function(t){e({open:!0,message:"\u041d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0456 \u0441\u0442\u0430\u043b\u0430\u0441\u044c \u043f\u043e\u043c\u0438\u043b\u043a\u0430 - ".concat(t),type:"error"})}));case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),_callee3)})))).apply(this,arguments)}function FormatedDate(e){return e.toISOString().substr(0,10)}function DefineDate(e){var t=new Date;switch(e){case"yesterday":return FormatedDate(new Date(t.setDate(t.getDate()-1)));case"lastweek":return FormatedDate(new Date(t.setDate(t.getDate()-7)));case"lastmonth":return FormatedDate(new Date(t.setDate(t.getMonth()-1)));default:return null}}function _getDefectsNumberByDateAndStatus(){return(_getDefectsNumberByDateAndStatus=Object(d.a)(l.a.mark((function _callee4(e,t){var a,n,r,c,s;return l.a.wrap((function _callee4$(i){for(;;)switch(i.prev=i.next){case 0:a=DefineDate(t),n=getDefectsByDateAndStatus(e,"open",a),r=getDefectsByDateAndStatus(e,"fixing",a),c=getDefectsByDateAndStatus(e,"solved",a),s=Promise.all([n,r,c]).then((function(t){return e({open:!0,message:"\u0414\u0430\u043d\u0456 \u0443\u0441\u043f\u0456\u0448\u043d\u043e \u0437\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u0456",type:"success"}),{OpenDefectsCount:t[0].defects.length,ProccessDefectsCount:t[1].defects.length,ClosedDefectsCount:t[2].defects.length}})).catch((function(t){e({open:!0,message:"\u041d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0456 \u0441\u0442\u0430\u043b\u0430\u0441\u044c \u043f\u043e\u043c\u0438\u043b\u043a\u0430 - ".concat(t),type:"error"})})),i.t0=t,i.next="yesterday"===i.t0?8:"lastweek"===i.t0?11:"lastmonth"===i.t0?14:17;break;case 8:return i.next=10,s;case 10:return i.abrupt("return",i.sent);case 11:return i.next=13,s;case 13:return i.abrupt("return",i.sent);case 14:return i.next=16,s;case 16:return i.abrupt("return",i.sent);case 17:return i.abrupt("return",null);case 18:case"end":return i.stop()}}),_callee4)})))).apply(this,arguments)}var ea=a(25),ta=a(545),aa=a(546),na=a(547),ra=a(548),ca=a(151);var sa=function DoughnutCard(e){var t=e.loaded,a=e.doughnutData,r=e.doughnutOptions;return Object(n.jsxs)(bt.a,{children:[Object(n.jsx)(ra.a,{title:"\u041a\u0456\u043b\u044c\u043a\u0456\u0441\u0442\u044c \u0434\u0435\u0444\u0435\u043a\u0442\u0456\u0432"}),Object(n.jsx)(z.a,{}),Object(n.jsxs)(ht.a,{children:[Object(n.jsx)(W.a,{height:300,position:"relative",children:t?Object(n.jsx)(ca.Doughnut,{data:a,options:r}):Object(n.jsx)(ie.a,{style:{position:"absolute",top:"50%",left:"45%"}})}),Object(n.jsx)(W.a,{display:"flex",justifyContent:"center",mt:2,children:a.apperiance.map((function(e){var t=e.color,a=e.icon,r=e.title,c=e.value;return Object(n.jsxs)(W.a,{p:1,textAlign:"center",children:[a,Object(n.jsx)(y.a,{color:"textPrimary",variant:"body1",children:r}),Object(n.jsx)(y.a,{style:{color:t},variant:"h2",children:c})]},r)}))})]})]})},ia=a(152),oa=a.n(ia);var la=function BarCard(e){var t=e.loaded,a=e.barData,r=e.barOptions,s=e.setFilteredDate,i=function ChangeFilteredDate(e){s(e)};return Object(n.jsxs)(bt.a,{elevation:3,children:[Object(n.jsx)(ra.a,{action:Object(n.jsxs)(c.a.Fragment,{children:[Object(n.jsx)(j.a,{onClick:function onClick(){i("yesterday")},className:oa.a.filterButton,size:"small",variant:"outlined",children:"\u0417\u0430 \u0434\u0435\u043d\u044c"}),Object(n.jsx)(j.a,{onClick:function onClick(){i("lastweek")},className:oa.a.filterButton,size:"small",variant:"outlined",children:"\u0417\u0430 \u0442\u0438\u0436\u0434\u0435\u043d\u044c"}),Object(n.jsx)(j.a,{onClick:function onClick(){i("lastmonth")},className:oa.a.filterButton,size:"small",variant:"outlined",children:"\u0417\u0430 \u043c\u0456\u0441\u044f\u0446\u044c"})]}),title:"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430 \u0434\u0435\u0444\u0435\u043a\u0442\u0456\u0432 \u0437\u0430 \u0447\u0430\u0441\u043e\u043c"}),Object(n.jsx)(z.a,{}),Object(n.jsx)(ht.a,{children:Object(n.jsx)(W.a,{height:400,position:"relative",children:t?Object(n.jsx)(ca.Bar,{data:a,options:r}):Object(n.jsx)(ie.a,{style:{position:"absolute",top:"50%",left:"50%"}})})}),Object(n.jsx)(z.a,{}),Object(n.jsx)(W.a,{display:"flex",justifyContent:"flex-end",p:2,children:Object(n.jsx)(j.a,{color:"primary",size:"small",variant:"text",children:Object(n.jsx)(P.b,{to:"/admin/defects",children:"\u041f\u0435\u0440\u0435\u0439\u0442\u0438"})})})]})};var da=function Dashboard(){var e=Object(q.a)(),t=Object(r.useState)({open:!1,message:"",type:""}),a=Object(u.a)(t,2),s=a[0],i=a[1],o=function DoughnutDataOptions(e){return{animation:!1,cutoutPercentage:80,layout:{padding:0},legend:{display:!1},maintainAspectRatio:!1,responsive:!0,tooltips:{backgroundColor:e.palette.background.default,bodyFontColor:e.palette.text.secondary,borderColor:e.palette.divider,borderWidth:1,enabled:!0,footerFontColor:e.palette.text.secondary,intersect:!1,mode:"index",titleFontColor:e.palette.text.primary}}}(e),l=function BarDataOptions(e){return{animation:!1,cornerRadius:20,layout:{padding:0},legend:{display:!1},maintainAspectRatio:!1,responsive:!0,scales:{xAxes:[{barThickness:140,maxBarThickness:150,barPercentage:1,categoryPercentage:1,ticks:{fontColor:e.palette.text.secondary},gridLines:{display:!1,drawBorder:!1}}],yAxes:[{ticks:{fontColor:e.palette.text.secondary,beginAtZero:!0,min:0},gridLines:{borderDash:[2],borderDashOffset:[2],color:e.palette.divider,drawBorder:!1,zeroLineBorderDash:[2],zeroLineBorderDashOffset:[2],zeroLineColor:e.palette.divider}}]},tooltips:{backgroundColor:e.palette.background.default,bodyFontColor:e.palette.text.secondary,borderColor:e.palette.divider,borderWidth:1,enabled:!0,footerFontColor:e.palette.text.secondary,intersect:!1,mode:"index",titleFontColor:e.palette.text.primary}}}(e),d=Object(r.useState)({datasets:[],labels:[],apperiance:[]}),j=Object(u.a)(d,2),b=j[0],p=j[1],f=Object(r.useState)({datasets:[],labels:[]}),h=Object(u.a)(f,2),m=h[0],O=h[1],x=Object(r.useState)("yesterday"),g=Object(u.a)(x,2),v=g[0],_=g[1],y=Object(r.useState)(!1),C=Object(u.a)(y,2),w=C[0],D=C[1];return Object(r.useEffect)((function(){(function getDefectsNumbers(e){return _getDefectsNumbers.apply(this,arguments)})(i).then((function(e){return p(function DoughnutDataCreate(e){var t=e.OpenDefectsCount,a=e.ProccessDefectsCount,r=e.ClosedDefectsCount;return{datasets:[{data:[+t,+a,+r],backgroundColor:["#4caf50","#ff9800","#e0e0e0"],borderWidth:8,borderColor:ea.a.common.white,hoverBorderColor:ea.a.common.white}],labels:["\u0412\u0456\u0434\u043a\u0440\u0438\u0442\u0456","\u0412 \u043f\u0440\u043e\u0446\u0435\u0441\u0456","\u0417\u0430\u043a\u0440\u0438\u0442\u0456"],apperiance:[{title:"\u0412\u0456\u0434\u043a\u0440\u0438\u0442\u0456",value:t,icon:Object(n.jsx)(ta.a,{}),color:"#4caf50"},{title:"\u0412 \u043f\u0440\u043e\u0446\u0435\u0441\u0456",value:a,icon:Object(n.jsx)(aa.a,{}),color:"#ff9800"},{title:"\u0417\u0430\u043a\u0440\u0438\u0442\u0456",value:r,icon:Object(n.jsx)(na.a,{}),color:"#e0e0e0"}]}}(e))}))}),[]),Object(r.useEffect)((function(){(function getDefectsNumberByDateAndStatus(e,t){return _getDefectsNumberByDateAndStatus.apply(this,arguments)})(i,v).then((function(e){D(!0),O(function BarDataCreate(e){return{datasets:[{data:[+e.OpenDefectsCount,+e.ProccessDefectsCount,+e.ClosedDefectsCount],backgroundColor:["#4caf50","#ff9800","#e0e0e0"]}],labels:["\u0412\u0456\u0434\u043a\u0440\u0438\u0442\u0456","\u0412 \u043f\u0440\u043e\u0446\u0435\u0441\u0456","\u0417\u0430\u043a\u0440\u0438\u0442\u0456"]}}(e))}))}),[v]),Object(n.jsxs)(c.a.Fragment,{children:[Object(n.jsxs)(Yt.a,{container:!0,spacing:3,children:[Object(n.jsx)(Yt.a,{item:!0,lg:8,md:12,xl:9,xs:12,children:Object(n.jsx)(la,{loaded:w,barData:m,barOptions:l,setFilteredDate:_})}),Object(n.jsx)(Yt.a,{item:!0,lg:4,md:6,xl:3,xs:12,children:Object(n.jsx)(sa,{loaded:w,doughnutData:b,doughnutOptions:o})})]}),Object(n.jsx)(SnackbarHandler,{snack:s,setSnack:i})]})},ua=a(550),ja=a(551),ba=[{path:"/admin/dashboard",icon:Object(n.jsx)(ua.a,{}),title:"\u0413\u043e\u043b\u043e\u0432\u043d\u0430"},{path:"/admin/admins",icon:Object(n.jsx)(Ae.a,{}),title:"\u0410\u0434\u043c\u0456\u043d\u0438"},{path:"/admin/users",icon:Object(n.jsx)(Wt.a,{}),title:"\u041a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0456"},{path:"/admin/defects",icon:Object(n.jsx)(ja.a,{}),title:"\u0414\u0435\u0444\u0435\u043a\u0442\u0438"},{path:"/admin/orders",icon:Object(n.jsx)(Ee.a,{}),title:"\u0417\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f"}],pa=Object(C.a)((function(e){return{root:{display:"flex"},drawer:Object(A.a)({},e.breakpoints.up("sm"),{width:240,flexShrink:0}),appBar:{zIndex:e.zIndex.drawer+1},menuButton:Object(A.a)({marginRight:e.spacing(2)},e.breakpoints.up("sm"),{display:"none"}),toolbar:e.mixins.toolbar,drawerPaper:{width:240},content:{flexGrow:1,padding:e.spacing(3)},closeMenuButton:{marginRight:"auto",marginLeft:0},title:{flexGrow:1},itemText:{fontSize:"1rem"},active:{color:"white",fontWeight:500,backgroundColor:e.palette.primary.main,"& svg":{color:"white"}},avatar:{height:"100px",width:"100px"},linkBtn:{color:"white",textDecoration:"none"}}})),fa=Object(L.a)((function(e){return Object(G.a)({badge:{backgroundColor:"#44b700",color:"#44b700",boxShadow:"0 0 0 2px ".concat(e.palette.background.paper),"&::after":{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"50%",animation:"$ripple 1.2s infinite ease-in-out",border:"1px solid currentColor",content:'""'}},"@keyframes ripple":{"0%":{transform:"scale(.8)",opacity:1},"100%":{transform:"scale(2.4)",opacity:0}}})}))(T.a),ha=function AdminPanel(e){var t=e.setAuthInfo,a=pa(),s=Object(q.a)(),i=Object(r.useState)(localStorage.getItem("admin_username")),o=Object(u.a)(i,2),p=o[0],f=(o[1],c.a.useState(!1)),h=Object(u.a)(f,2),m=h[0],O=h[1];function handleDrawerToggle(){O(!m)}var g=function(){var e=Object(d.a)(l.a.mark((function _callee(){return l.a.wrap((function _callee$(e){for(;;)switch(e.prev=e.next){case 0:x(),t(!1);case 2:case"end":return e.stop()}}),_callee)})));return function logoutHandler(){return e.apply(this,arguments)}}(),v=Object(n.jsx)("div",{children:Object(n.jsx)(I.a,{children:ba.map((function(e,t){var a=e.path,r=e.icon,c=e.title;return Object(n.jsx)(X,{path:a,icon:r,title:c},t+c)}))})});return Object(n.jsxs)("div",{className:a.root,children:[Object(n.jsx)(b.a,{}),Object(n.jsx)(H.a,{position:"fixed",className:a.appBar,children:Object(n.jsxs)(F.a,{children:[Object(n.jsx)(M.a,{color:"inherit","aria-label":"Open drawer",edge:"start",onClick:handleDrawerToggle,className:a.menuButton,children:Object(n.jsx)(R.a,{})}),Object(n.jsx)(y.a,{variant:"h6",className:a.title,children:Object(n.jsx)(P.b,{to:"/admin/dashboard",className:a.linkBtn,children:"Digichlist"})}),Object(n.jsx)(j.a,{color:"inherit",onClick:g,children:"\u0412\u0438\u0445\u0456\u0434"})]})}),Object(n.jsxs)("nav",{className:a.drawer,children:[Object(n.jsx)(E.a,{smUp:!0,implementation:"css",children:Object(n.jsxs)(U.a,{variant:"temporary",anchor:"rtl"===s.direction?"right":"left",open:m,onClose:handleDrawerToggle,classes:{paper:a.drawerPaper},ModalProps:{keepMounted:!0},children:[Object(n.jsx)(M.a,{onClick:handleDrawerToggle,className:a.closeMenuButton,children:Object(n.jsx)(V.a,{})}),v]})}),Object(n.jsx)(E.a,{xsDown:!0,implementation:"css",children:Object(n.jsxs)(U.a,{className:a.drawer,variant:"permanent",classes:{paper:a.drawerPaper},children:[Object(n.jsx)("div",{className:a.toolbar}),Object(n.jsxs)(W.a,{alignItems:"center",display:"flex",flexDirection:"column",p:2,children:[Object(n.jsx)(fa,{color:"secondary",overlap:"circle",anchorOrigin:{vertical:"bottom",horizontal:"right"},badgeContent:"",children:Object(n.jsx)($.a,{variant:"circular",component:P.b,to:"/admin/admins",className:a.avatar})}),Object(n.jsx)(y.a,{color:"textPrimary",variant:"h5",children:p}),Object(n.jsx)(y.a,{color:"textSecondary",variant:"body2",children:"\u0410\u0434\u043c\u0456\u043d"})]}),Object(n.jsx)(z.a,{}),v]})})]}),Object(n.jsxs)("div",{className:a.content,children:[Object(n.jsx)("div",{className:a.toolbar}),Object(n.jsxs)(B.d,{children:[Object(n.jsx)(B.b,{path:"/admin/dashboard",component:da}),Object(n.jsx)(B.b,{path:"/admin/admins",component:Be}),Object(n.jsx)(B.b,{path:"/admin/defects",component:Ut}),Object(n.jsx)(B.b,{path:"/admin/users",component:Xt}),Object(n.jsx)(B.b,{path:"/admin/orders",component:Ke})]})]})]})},ma=function LoginRoute(e){var t=e.component,a=e.path,r=e.authInfo,c=e.setAuthInfo;return Object(n.jsx)(B.b,{render:function render(e){return r?Object(n.jsx)(B.a,{to:{pathname:"/admin/dashboard",state:{from:e.location}}}):Object(n.jsx)(t,Object(ke.a)({setAuthInfo:c,path:a},e))}})},Oa=function ProtectedRoute(e){var t=e.component,a=e.path,r=e.authInfo,c=e.setAuthInfo;return Object(n.jsx)(B.b,{render:function render(e){return r?Object(n.jsx)(t,Object(ke.a)({setAuthInfo:c,path:a},e)):Object(n.jsx)(B.a,{to:{pathname:"/login",state:{from:e.location}}})}})};a(468);var xa=function App_App(){var e=Object(r.useState)(!1),t=Object(u.a)(e,2),a=t[0],c=t[1];return Object(r.useEffect)((function(){function _isAuth(){return(_isAuth=Object(d.a)(l.a.mark((function _callee(){var e;return l.a.wrap((function _callee$(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g();case 2:e=t.sent,c(e);case 4:case"end":return t.stop()}}),_callee)})))).apply(this,arguments)}!function isAuth(){return _isAuth.apply(this,arguments)}()}),[]),Object(n.jsxs)(B.d,{children:[Object(n.jsx)(B.a,{path:"/",to:"/login",component:N,exact:!0}),Object(n.jsx)(B.a,{path:"/admin",exact:!0,to:"/admin/dashboard"}),Object(n.jsx)(Oa,{authInfo:a,setAuthInfo:c,path:"/admin",component:ha}),Object(n.jsx)(ma,{setAuthInfo:c,authInfo:a,path:"/login",component:N}),Object(n.jsx)(B.b,{path:"*",component:function component(){return Object(n.jsx)("h1",{children:"404"})}})]})},ga=function reportWebVitals(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,569)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;a(e),n(e),r(e),c(e),s(e)}))};i.a.render(Object(n.jsx)(P.a,{children:Object(n.jsx)(xa,{})}),document.getElementById("root")),ga()},75:function(e,t,a){e.exports={groups:"Admins_groups__KEden",entityHeader:"Admins_entityHeader__3irEG","MuiSelect-root":"Admins_MuiSelect-root__3F0oP",entityHeaderTitle:"Admins_entityHeaderTitle__v3Zfb",entityHeaderButton:"Admins_entityHeaderButton__2r3le",loader:"Admins_loader__2aYDN","MuiInput-formControl":"Admins_MuiInput-formControl__2TytQ",button:"Admins_button__32ud6"}}},[[469,1,2]]]);